(function(m){var w=window.AmazonUIPageJS||window.P,q=w._namespace||w.attributeErrors,e=q?q("DetailPageTwisterViewAsset",""):w;e.guardFatal?e.guardFatal(m)(e,window):e.execute(function(){m(e,window)})})(function(m,w,q){m.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler","page-refresh-custom-params-handler").register("page-refresh-view",function(e,J,t,g,v,r,z){function x(r,d,x){function A(a){return{chunk:function(b){var a=
b.ASIN,l=b.Value;b=b.FeatureName;if(!k.hiddenFeatures[b]){var c=b,f,d;try{c&&l&&l.content&&(d=l.content[c],"undefined"!==typeof d&&(f=u("#"+c),f.html(d).removeClass("js-feature-refresh-overlay").css({opacity:""})))}catch(h){c=c||"NoFeatureName",D.logFatal(h,{message:"Error in feature"+c})}k.twisterRefreshHandler.stampFeature(c,a);"twister-slot-price_feature_div"==b&&(a=l?l.content:null,f=u(".swatchSelect .twisterSwatchPrice").html(),l=u(".swatchSelect .price_slot_ppu").html(),f&&a&&a.priceToSet&&
(f=e.trim(f),a.priceToSet!==f&&(u(".swatchSelect .twisterSwatchPrice").html(a.priceToSet),B("twisterUpdatePriceMismatch"))),l&&a&&a.hasPricePerUnit&&a.pricePerUnitDisplay&&(l=e.trim(l),a.pricePerUnitDisplay!==l&&(u(".swatchSelect .price_slot_ppu").html(a.pricePerUnitDisplay),B("twisterUpdatePricePerUnitMismatch"))))}},success:function(a,n,l){B("twisterUpdateSuccess");v.updateRenderTime()},error:function(a,n,l){Twister.$("#variations-overlay").hide();B("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&
(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(a){D.logFatal("Ajax aborted: "+a)},timeout:4E4}}function y(a,b,n,l,c){var f=[];"parent"===a?(b=E(b,l,"parent",c),f.parent=b,b=E(n,l,"partial",c),f.partial=b):(b=E(n,l,a,c),f[a]=b);return f}function h(a,b,n,l,c){for(var f in a)if(a.hasOwnProperty(f)){if("full"===f){var d=n.dimensionType,h=k.twisterUtil.getDimensionInfo().length,A=n.dimensionDisplayType,p=n.newAsin,g=c&&(e.state("dp-twister-csm")||{}).updateCSMPageTypeId;k.twisterRefreshHandler.startMeasurement(p,
d,h,A,g?p:q,g?["is-twister","parentAsin-"+F]:q)}d=a[f].twisterRefreshParams;h=a[f].notifyClientParams;if(c){var t=!1;k.twisterRefreshHandler.doPageRefresh(null,d,b,l,function(a){a&&!a.isNewRequest&&(G(f),t=!0)},function(){!t&&G(f)})}M(h.asin,h.id,f,c)}}function G(a){u(k.config[a].affectedFeatures).addClass("js-feature-refresh-overlay").css({opacity:.5})}function p(){u.each(d.contextMetaData,function(a,b){var n={};b=b.elementList||[];var l=b.length,c=[];n.click={};n.mouseOver={};for(var f=0;f<l;f++){var d=
u("#"+(b[f].divToUpdate||b[f].dtu));c.push("#"+(b[f].divToUpdate||b[f].dtu));if(d.length&&(b[f].customClientFunction||b[f].ccf)){if(b[f].updateOnHover||b[f].uoh)n.mouseOver[b[f].divToUpdate||b[f].dtu]=d.attr("customfunctionname");n.click[b[f].divToUpdate||b[f].dtu]=d.attr("customfunctionname")}}k.config[a].affectedFeatures=c.join(",");k.config[a].clientFeatures=n})}function M(a,b,n,l){var c="",c=l?g.EVENT_TYPE_CLICK:g.EVENT_TYPE_MOUSEOVER;u.each(k.config[n].clientFeatures[c],function(c,l){try{var n=
function(){k.twisterRefreshHandler.stampImageLoad(a)};(function(){var a={};a.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+l)(b,DetailPage.StateController,n)}).call(a)})()}catch(d){D.logFatal("Client feature - "+c+", threw and exception :- "+d)}})}function E(a,b,n,l){if(/(?=.{0,512}$)^([A-Z]{2})_([A-Za-z]+)_([0-9]+)#([A-Za-z0-9\-\_\#\:\|]*$)/g.test(a)){var c=!0,f=encodeURIComponent(a);a=F}var d={},h={};d.asinList=a;c&&(d.customizationToken=f);d.id="parent"===n?a:"partial"===l?b:a;d.mType=
n;d=N(n,d);n=!1;(l=e.state("pwState"))&&(n=l.isTryState);n&&(d.isTryState=n);O(d,z.getCustomPageRefreshParams(a)||{});d=k.twisterRefreshHandler.createCustomParamsMap({},d);h.asin=a;h.id=b;return{twisterRefreshParams:d,notifyClientParams:h}}function O(a,b){e.each(b,function(b,d){a[d]=b})}function N(a,b){u.each(d.contextMetaData[a].mTypeSpecificURLParams,function(a,d){b[a]=d});return b}function P(a){a=k.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(a.selected_variation_values);k.twisterUtil.isFullySelected(a)?
k.currentPageSelectionState="full":k.currentPageSelectionState="partial"}function Q(a){var b={};b.config=a.measurement;b.dimensionDisplayType=a.dimensionsDisplayType;b.storeID=a.storeID;b.productGroupID=a.productGroupID;return b}function R(a){a=a.immutableURLPrefix;var b=null;a&&-1!=a.indexOf("?")&&(a=a.split("?")[1],0<a.length&&(b={},a=a.split("\x26"),e.each(a,function(a){a=a.split("\x3d");b[a[0]]=a[1]})),b.isFlushing=2,b.dpEnvironment=Twister.dpEnvironment);return b}function H(a,b){var d;"partial"===
a&&"partial"===b&&(d="partial");"partial"===a&&"full"===b&&(d="full");"full"===a&&"partial"===b&&(d="parent");"full"===a&&"full"===b&&(d="full");return d}var k=this,F=d.parent_asin,C=w.ue,I="",D=new x("dpTwisterPageRefreshView");this.twisterUtil=r.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};k.viewUtil=new t(r);k.subType;var B=function(a){C&&C.count&&
C.count(a,(C.count(a)||0)+1)};(function(){P(d);p();var a={featureName:k.twisterFeatureName},b=Q(d);k.twisterRefreshHandler=new J(a,null,b);a=R(d.twisterUpdateURLInfo);k.twisterRefreshHandler.addParams(a);z.initialize();r.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(a,b){var c={};if(a!==g.METADATA){var c={},f;f=q;if(b)switch(a){case g.VARIATION_CHANGE:f=b.selected().selInfo;break;case g.VARIATION_PEEK:f=b.peek().selInfo}c.selectionInfo=f;c.dimensionCombination=
k.viewUtil.getCurrDimCombId(c.selectionInfo,"_","X");f=k.twisterUtil.isFullySelected(c.dimensionCombination);c.childAsin=k.twisterUtil.getAsinFromSelectionInfo(c.selectionInfo,f);c.newPageSelectionState=f?"full":"partial";c.mTypeForRefresh=H(k.currentPageSelectionState,c.newPageSelectionState);c.newAsin="parent"===c.mTypeForRefresh?F:c.childAsin;c.doNotAbort="parent"===c.mTypeForRefresh?!0:!1;c.twisterCallListParams=y(c.mTypeForRefresh,c.newAsin,c.childAsin,c.dimensionCombination,c.newPageSelectionState);
c.optionsForTwisterRefresh=A(b);c.pageRefreshMeasure={newAsin:c.newAsin,dimensionType:I,dimensionDisplayType:d.dimensionsDisplayType}}switch(a){case g.VARIATION_CHANGE:k.subType!==g.PRODUCTIZED_VIEW_SUBTYPE&&(h(c.twisterCallListParams,c.optionsForTwisterRefresh,c.pageRefreshMeasure,c.doNotAbort,!0),k.currentPageSelectionState=c.newPageSelectionState,k.subType=q);break;case g.METADATA:switch(b.subType){case g.DP_STATE_VIEW_SUBTYPE:I=b.divMetadata.dimDisplayType;break;case g.PRODUCTIZED_VIEW_SUBTYPE:k.subType=
b.subType,c.dimensionCombination=b.newDimCombID,c.childAsin=b.childAsin,c.newAsin=b.newAsin,c.newPageSelectionState=k.twisterUtil.isFullySelected(c.dimensionCombination)?"full":"partial",c.mTypeForRefresh=H(k.currentPageSelectionState,c.newPageSelectionState),c.doNotAbort="parent"===c.mTypeForRefresh?!0:!1,c.twisterCallListParams=y(c.mTypeForRefresh,c.newAsin,c.childAsin,c.dimensionCombination,c.newPageSelectionState),c.optionsForTwisterRefresh=A(b),c.pageRefreshMeasure={newAsin:c.newAsin,dimensionType:b.divMetaData?
b.divMetaData.dimDisplayType:q,dimensionDisplayType:d.dimensionsDisplayType},h(c.twisterCallListParams,c.optionsForTwisterRefresh,c.pageRefreshMeasure,c.doNotAbort,!0),k.currentPageSelectionState=c.newPageSelectionState}}}})})()}var u=e.$;r.registerDimensionSubView("page-refresh-view",x);return x});m.when("A").register("twister-common-constants",function(e){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",
BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",
ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",
ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});m.when("A").register("page-refresh-custom-params-handler",function(e){var m={};return{initialize:function(){e.on("updateCustomPageRefreshParams",function(e,g,v){e&&g&&null!==v&&v!==q&&(m[e]||(m[e]={}),m[e][g]=v)})},getCustomPageRefreshParams:function(e){return m[e]||{}}}});"use strict";m.when("A","a-sheet","jQuery","ready").execute(function(e,m,t){e.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var e=t("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),
m=e.find("#selected-format"),r=m.offset().left,q=Math.abs(m.width()),m=Math.max(document.documentElement.clientWidth,w.innerWidth||0),q=m-q,x=e.scrollLeft();(r>q||0>=r)&&e.scrollLeft(x+r-m/3)})});m.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(e,w,t){var g=e.$;return function(v,r,z){function x(){e.each(r.contextMetaData,function(e,m){var h={};e=e.elementList||[];var g=e.length;h.mouseOver=[];for(var p=0;p<g;p++)(e[p].customClientFunction||e[p].ccf)&&(e[p].updateOnHover||
e[p].uoh)&&h.mouseOver.push(e[p].divToUpdate||e[p].dtu);d.clientFeatures[m]=h})}function u(q,y){e.each(d.clientFeatures[y][t.EVENT_TYPE_MOUSEOVER],function(d){try{var e=g("#"+d),p;e.length&&(p=e.attr("customfunctionname"),function(){var d={};d.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+p)(q,DetailPage.StateController)}).call(d)}())}catch(y){L.logFatal("Client feature - "+feature+", threw and exception :- "+y)}})}function K(e){e=d.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(e.selected_variation_values);
d.twisterUtil.isFullySelected(e)?d.currentPageSelectionState="full":d.currentPageSelectionState="partial"}var d=this,L=new z("dpTwisterHoverRefreshView");this.twisterUtil=v.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};d.viewUtil=new w(v);d.subType=q;(function(){function m(e){e=d.viewUtil.getCurrDimCombId(e,"_","X");var h=d.twisterUtil.isFullySelected(e)?"full":"partial",g,p=d.currentPageSelectionState;"partial"===
p&&"partial"===h&&(g="partial");"partial"===p&&"full"===h&&(g="full");"full"===p&&"partial"===h&&(g="parent");"full"===p&&"full"===h&&(g="full");h=[g];"parent"===g&&(h=["parent","partial"]);return{clientFeatureToRefresh:h,dimensionCombination:e}}K(r);x();v.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(g,h){switch(g){case t.VARIATION_PEEK:var r={};g=h.peek().selInfo;r=m(g);e.each(r.clientFeatureToRefresh,function(d){u(r.dimensionCombination,
d)});case t.VARIATION_CHANGE:d.subType!==t.PRODUCTIZED_VIEW_SUBTYPE&&(g=h.selected().selInfo,h=d.viewUtil.getCurrDimCombId(g,"_","X"),d.currentPageSelectionState=d.twisterUtil.isFullySelected(h)?"full":"partial",d.subType=q);break;case t.METADATA:switch(h.subType){case t.PRODUCTIZED_VIEW_SUBTYPE:d.subType=h.subType,d.currentPageSelectionState=d.twisterUtil.isFullySelected(h.newDimCombID)?"full":"partial"}}}})})()}})});