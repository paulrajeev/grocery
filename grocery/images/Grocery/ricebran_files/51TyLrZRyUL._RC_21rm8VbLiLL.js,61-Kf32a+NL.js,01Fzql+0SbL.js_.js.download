(function(A){var C=window.AmazonUIPageJS||window.P,F=C._namespace||C.attributeErrors,c=F?F("DPTwisterPlusDesktopConfiguratorAssets",""):C;c.guardFatal?c.guardFatal(A)(c,window):c.execute(function(){A(c,window)})})(function(A,C,F){A.when("A","desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory",
"twister-js-init-dpx-data","twister-plus-desktop-configurator-mark-render").register("desktop-configurator-view-initialiser",function(c,g,l,n,f,q,v,x,y,p){var t=p?p.inlineTwisterData||{}:{};t.inlineTwisterEnabled&&(q=new q,new g(p,l.Row,n,f,q,v,x,y),!t.shouldDelayRegistrationWithTwisterCore&&c.trigger("desktop-configurator-view-initialized"))});"use strict";A.when("A").register("desktop-configurator-dimension-handler",function(c){function g(c){this.numberOfDimensionsExpandedOnLanding=c.numberOfDimensionsExpanded||
0;this.expandAllDimensions=-1===this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=c.maxNumberOfDimensionsExpanded||1}g.prototype={registerDimension:function(c,g){this.dimensionKeyRowMap[c]=g;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(c)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=
Object.keys(this.dimensionKeyRowMap).length)},expandDimension:function(c){-1===this.expandedDimensionList.indexOf(c)&&this.expandedDimensionList.push(c);if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var g=0;g<this.expandedDimensionList.length&&(this.expandedDimensionList[g]!==c&&this.dimensionKeyRowMap[this.expandedDimensionList[g]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);g++);},collapseDimension:function(c){c=this.expandedDimensionList.indexOf(c);
-1!==c&&this.expandedDimensionList.splice(c,1)}};return g});"use strict";A.when("A","desktop-configurator-constants","3p-promise").register("desktop-configurator-view",function(c,g,l){var n=c.$;return function(f,q,v,x,y,p,t,B){function u(){"function"===typeof C.markFeatureInteractive&&C.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function a(){if(!D)return 0===f.unselectedDimCount;var b=r();return!!D.util.getAsinFromSelectionInfo(b)}function d(b,
a,d,e,k,c,m,u,r,f,w,z){return{text:b,image:a||"",popoverImage:d||"",name:e,id:w+"_"+e,selected:k,slotHtm:c,showSlot:m,isVisible:u,unavailable:r,defaultSlotUnavailable:V,isCirclularImageSwatch:h.inlineTwisterData&&"CIRCLE"===h.inlineTwisterData.swatchShape,asin:f,pageUrl:z}}function e(b){W[b]||null===H[b]||(b=h.rows[b],b.toggleSwatch&&b.toggleSwatch.removeMisplacedSwatch())}function m(b,a){var d=N.unselectedDimensionPrompt||"",e=f&&f.variationDisplayLabels?f.variationDisplayLabels[b]:"",h=f&&f.variationValues?
f.variationValues[b][a]:"";return{dimKey:b,titleSelectorPrefix:"inline-twister-dim-title-",titleValueSelector:"inline-twister-dim-title-value",mainText:e,subText:-1!==a?h:d.replace("###dimension",e||"")}}function r(){if(!D){var b=[];c.each(h.dimList,function(a){b.push({dimKey:a,val:f.selectedVariationValues?f.selectedVariationValues[a]:-1})});return b}return D.state()}function b(){return c.map(h.dimList,function(b,a){if(!h.isSingletonMap[b])return new l(function(d){k(h.rows[b],b,a);d()})})}function k(b,
e,k){var m=h.inlineTwisterData.slotsEnabledDimensions,u=!!((h.dimList.length===m.length?m[k]:m[0])&&a(e));k=f.variationValues[e];var r=b.getInitialVisibleSwatchList(),w=[];c.each(k,function(b,a){b=d(b,X[e+"::"+a],Y[e+"::"+a],a,h.initSelectionState[e].val===a,r[a]?r[a].slotHtm:"",u,r[a]&&r[a].isVisible,r[a]&&r[a].unavailable,F,e,L[e]?L[e][b]:null);w.push(b)});h.swatches[e]=w}function w(){c.each(h.rows,function(b){h.isSingletonMap[b.dimKey]||(b.createDisplaySwatches(),h.textSwatchMap[b.dimKey]&&b.toggleSwatch.alignTextSwatches())})}
function z(){function b(a,e,k){var m,r,u,w=a.expanderContent.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)"),p=f.variationValues[e]||[],z=h.inlineTwisterData.inlineVariationsSize,v=-1,g=z,q=[],l=null;-1===z&&(v=parseInt(a.expanderContent.attr("data-swatchCountPerRow"))||w.length,g=v*O[e]);c.each(w,function(b,h){var c=parseInt(b.getAttribute("data-idxInToggleSwatchList")),w="true"===b.getAttribute("data-initiallySelected"),f="true"===b.getAttribute("data-initiallyUnavailable");
m=b.getAttribute("data-asin");r=c;u=p[c]||"";var n,t,G;n=X[e+"::"+r];t=Y[e+"::"+r];G=u;f=d(G,n,t,r,w,"",k,!0,f,m,e,L[e]?L[e][G]:null);a.toggleSwatch&&(n=a.toggleSwatch.createSwatch(f,b),f.isVisible=n.isVisible);q.push(f);w&&h>=g&&(H[e]=c);-1!==z&&-1===v&&(b=b.getBoundingClientRect().top,null===l?l=b:b!==l&&(v=h))});-1!==z&&(-1===v&&(v=w.length),O[e]=Math.ceil(w.length/v));h.inlineVariationsSize[e]=w.length;a.toggleSwatch&&a.toggleSwatch.setNumberOfSwatchesPerRow(v);return q}function k(b,d,e){var m=
!(!b||!a(d)),r=h.rows[d].getInitialVisibleSwatchList();m&&c.each(r,function(a){if(!a.unavailable){var k=B.updateIfCurrentlyActive.bind(B,a.id),k=h.slotManager.get(a.asin,d,h.noOfLoadingIndicator,!1,Z,k,e);a.updateSlotNode({showSlot:b,slotHtm:k},!1,d)}})}function w(b,a,d){b={dimIndex:h.dimIndexMap[b],dimValueIndex:a};a=g.DP_STATE_VIEW_SUBTYPE;var e=h.dimensionsMap,k;k=r();for(var c=g.CHAR_UNDERSCORE,m=[],u=0;u<h.dimensionsMap.length;u++){var f=k[u].val;-1===f&&(f=g.CHAR_ASTERISK);m.push(String(f))}k=
c?m.join(c):m;return{divMetadata:b,eventType:d,subType:a,dimensionsMap:e,currDimCombId:k}}var z=r(),p=0,v={},l=h.inlineTwisterData.slotsEnabledDimensions,t=h.inlineTwisterData.popoverSlotsEnabledDimensions;n.each(z,function(b,a){v[a.dimKey]=a;h.dimIndexMap[a.dimKey]=b;h.dimensionsMap[b]=a.dimKey});h.initSelectionState=v;n.each(h.dimList,function(b,a){var d=v[a].val;b=G(a);var d=m(a,d),e=!(!P&&(h.dimList.length===l.length?l[p]:l[0])),c=-1!==Q.indexOf(a);h.textSwatchMap[a]=b;b=new q("inline-twister-row-",
d,{showSlot:!1,dimKey:a,inlineTwisterData:h.inlineTwisterData},{handleDimensionExpansion:function(b,d,m){a=b.dimKey;if(m){h.dimensionHandler.expandDimension(a);b=F;m={};R[a]?(m=S(h.swatches[a],d,a,r(),!1,!c,e),h.indexTranslationMap[a]=m,b={swatches:h.swatches[a]}):(k(d,a,e),R[a]=!0);var u=h.rows[a];u.setState(b,m,I,null,!1);J(d,u,a);h.logger.logDimensionExpanded(a);c||(H[a]=null)}else h.dimensionHandler.collapseDimension(a),h.logger.logDimensionCollapsed(a)}},h.logger);h.rows[a]=b;p+=1});0===h.inlineTwisterData.numberOfDimensionsExpanded&&
(u(),aa=!0);p=0;n.each(h.dimList,function(d,k){function m(b,a,d){if(a){var e=parseInt(a.buttonName,10),c=b[e]&&b[e].id?b[e].id:"";k=a.buttonGroupName;b[e]&&b[e].selected&&h.logger.logSelectedSwatchClick();c&&B.exists(c)&&B.hide(c);I=k;b={dimKey:k,val:e};C.newTwisterInteractionStartTime=new Date;h.twister.metaData(w(k,e,g.viewEvents.CLICK));h.twister.dimensionChanged(b);h.logger.logDimensionValueClick();d&&h.logger.logDimValueClickAfterAutoUpdate()}}function u(b,d){var e=d.data,k=d.type;d=d.$currentTarget;
var c=e.id,m=!!a(b),m=K&&m&&y,m=e.showImageInPopOver||m,f=!y,z=[];if(e){if(k===g.viewEvents.MOUSE_ENTER){var v=parseInt(e.name,10);z.push({dimKey:b,val:v});m&&B.show(c,d,e,f)}else m&&B.hide(c),z=r();D&&(h.twister.metaData(w(b,v,k)),h.twister.dimensionPeek(z));I=b}}function z(b,a){var d=parseInt(b.buttonName,10),e=h.swatches[a];(e?e[d]:F)?(E.setUserInteracting(!0),c.delay(function(){m(e,b)},350),h.logger.logSecViewSwatchClick()):A.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+
d+" ; Swatch length: "+h.swatches[a].length,ba.ERROR,ba.ATTRIBUTION)}function v(b,a){h.isSideSheetOpen=a;h.isWindowResizedAfterSideSheetOpen&&!a&&n.each(h.dimList,function(b,a){h.textSwatchMap[a]&&(G(a),(b=h.rows[a])&&b.toggleSwatch&&(b.toggleSwatch.alignTextSwatches(),b.toggleSwatch.alignTextSwatchNodesInLastRow()))});h.isWindowResizedAfterSideSheetOpen=!1}function q(b,a,d){var k=N.desktopConfiguratorAllOptionsString||"",m=h.swatches[b].length,u={dimensionDisplayText:d.mainText,displayValueText:d.subText,
dimKey:b,getSwatchInfo:E.getSwatch.bind(E),destroyPopover:B.destroy,optionsText:k,totalValueCount:m,isTextSwatch:M};h.sideSheet.open(u);var w={swatches:h.swatches[b]};c.delay(function(){var d=S(h.swatches[b],a,b,r(),!0,!1,T);U&&e(b);E.setState(w,d,I,null,!0,!0);h.sideSheet.update(u);W[b]=!0;c.delay(function(){M&&J(a,E,b,!0);M&&E.toggleSwatch&&m<g.TEXT_ALIGNMENT_LIMIT&&E.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);h.isSideSheetOpen=!0;h.isWindowResizedAfterSideSheetOpen=!1;h.logger.logSeeAllLinkClick("Dimension"+
(h.dimIndexMap[b]+1))}function G(b){D&&(h.isWindowResizedAfterSideSheetOpen=!0,h.isSideSheetOpen||J(h.showSlotMap[b],h.rows[b],b,!1))}var M=h.textSwatchMap[k];d=[];var x=!P&&(h.dimList.length===l.length?l[p]:l[0]),y=h.dimList.length===t.length?t[p]:t[0],T=!x,K=x||y,U=-1!==Q.indexOf(k),E=h.rows[k];h.showSlotMap[k]=K;O[k]=h.inlineTwisterData.numOfRowsPerDimension;x=-1!==f.singletonDimensionKeys.indexOf(k);h.isSingletonMap[k]=x;p+=1;!x&&E&&(x=!(!K||!a(k)),H[k]=null,d={name:k,swatches:d,isTextSwatch:M,
onChange:m,onHover:u,hideSlotsFromMainView:T,totalSwatchCount:(f.variationValues[k]||[]).length,preserveNaturalSwatchOrder:U},h.sideSheet.registerToggleButtonGroup(k,z,v),E.initializeComponents(d,K,{showSideSheet:q,handleWindowResize:G}),h.dimensionHandler.registerDimension(k,E),d=b(E,k,x),h.swatches[k]=d)});aa||u()}function G(b){var a=!0;(h.inlineTwisterData.disableImageSwatch===F?0:h.inlineTwisterData.disableImageSwatch)||(a=!h.inlineTwisterData.imageDimensionKeysMap[b]);return a}function S(b,d,
k,m,u,r,w,f){var z=!(!d||!a(k));d=D.util.getDimAvailability(k,m);var v=-1!==Q.indexOf(k),p={},g=0,q=B.updateIfCurrentlyActive,l=-1;n.each(m,function(b,a){a.dimKey===k&&(l=a.val)});-1!==l&&(r&&(p[l]=g),g++);var t=h.rows[k];c.each(d.available,function(a){b[a.index]=b[a.index]||{};var d=b[a.index];d.unavailable=!1;d.selected&&(l=a.index,d.isVisible||(null!==H[k]&&b[H[k]]&&(b[H[k]].isVisible=!1,v&&e(k)),H[k]=a.index),d.isVisible=!0);r&&(d.isVisible=g<h.inlineVariationsSize[k]||d.selected);var m=d.isVisible||
u,n=u?d.id+"_sec":d.id;z&&m?d.slotHtm=h.slotManager.get(a.asin,k,h.noOfLoadingIndicator,u,Z,q.bind(B,n),w,f):(d.slotHtm=d.slotHtm||"",q(n,d.slotHtm));u&&t&&t.toggleSwatch&&(m=t.toggleSwatch.getSwatch(a.index),c.objectIsEmpty(m)&&(p[a.index]=g));r&&l!==a.index&&(p[a.index]=g);d.showSlot=z;d.selected||g++});c.each(d.unavailable,function(a){b[a.index]=b[a.index]||{};var d=b[a.index];d.unavailable=!0;r&&(d.isVisible=g<h.inlineVariationsSize[k]);d.slotHtm=z?V:"";r&&(p[a.index]=g);d.showSlot=z;g++});R[k]=
!0;v&&(p={});return p}function J(b,a,d,e){var k=h.textSwatchMap[d];b&&k&&(!e||h.isSideSheetOpen)&&(h.slotManager.resetMinSlotHeight(d),b=a.toggleSwatch.getSlotNodes(e),ca(b,d,e),h.slotManager.updateSlotHeight(d,e))}function ca(b,a,d){h.slotManager.resetSlotHeight(a,d);c.each(b,function(b,d){c.each(b,function(b){h.slotManager.setState(b,a,d)})})}function Z(b,a){a&&!h.isSideSheetOpen||J(!0,h.rows[b],b,a)}var h=this,D=F;this.isWindowResizedAfterSideSheetOpen=!1;this.data=f;this.noOfLoadingIndicator=
1;this.dimList=f.reorderedDimensionListKeys||[];this.dimensionsMap=[];this.logger=y;this.inlineTwisterData=f?f.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new t;var H={},N=this.inlineTwisterData&&this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap:{},V='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+(N.defaultSlotUnavailableString||"")+"\x3c/span\x3e",X=f.imageHashMap||{},Y=f.desktopConfiguratorPopoverImageMap||{},L=f.dimensionPageLoadUrls||
{},O={},P=!!f.isAssemblyVariationsEnabled;this.rows={};this.dimensionHandler=new p(h.inlineTwisterData);this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchMap={};var I,ba=g.loggingConstants;this.initSelectionState={};B.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize={};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};var Q=h.inlineTwisterData.dimsWithSwatchReorderingDisabled||
[],W={},R={},aa=!1;(function(){var b=h.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");b.start();z();b.stop()})();c.on("register-desktop-configurator-with-twisterCore",function(a,d){D=a;h.logger.registerTwisterCore(D);h.sideSheet.init(h.logger);a=r();var e=h.inlineTwisterData.slotsEnabledDimensions,k=h.inlineTwisterData.popoverSlotsEnabledDimensions,u={};n.each(a,function(b,a){u[a.dimKey]=a});D.slotsDimSum.addDefaultQueryParameter("showFancyPrice",h.inlineTwisterData.showFancyPrice);
D.slotsDimSum.addDefaultQueryParameter("twisterFlavor",g.DESKTOP_CONFIGURATOR_FLAVOR);h.slotManager=new v(D,x,h.logger,h.inlineTwisterData);h.dimensionHandler.init();var f=0;c.each(h.rows,function(b){function a(e){var k,u={},f;k=e.selected().selectionInfo();n.each(k,function(b,a){u[a.dimKey]=a});f=u[d].val;e=h.swatches[d];e[f]=e[f]||{};e[r]=e[r]||{};e[r].selected=!1;e[f].selected=!0;var z=m(d,r);r===f||w||b.setThumbnailImage(e[f].image);r=f;S(e,g,d,k,!1,!1,p,g);k=m(d,f);f={swatches:e};var v=c.filter(e,
function(b){return b.isVisible});e.length===v.length&&(b.hideSideSheetLink(),h.inlineVariationsSize[d]=e.length);b.setExpanderHeaderAriaLabel(z,k);b.setState(f,{},I,k,!1);J(g,b,d)}if(!h.isSingletonMap[b.dimKey]){b.postInitialize();var d=b.dimKey,r=u[d].val,w=G(d),z=h.dimList.length===k.length?k[f]:k[0],v=!P&&(h.dimList.length===e.length?e[f]:e[0]),p=!v,g=v||z;h.twister=D.registerActive({viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+d},{updateView:function(e,k){var u={};"VARIATION_CHANGE"===
e?c.delay(function(){a(k)}):"VARIATION_PEEK"===e&&(e=k.peek().selectionInfo(),n.each(e,function(b,a){u[a.dimKey]=a}),e=u[d].val,e=m(d,e),I===d&&b.title.setState(e),h.sideSheet.activeDimKey===d&&h.sideSheet.updateDimVal(e))}})}f++});l.all(b()).then(function(){w()});c.trigger("desktop-configurator-twisterCore-initialized",h);d.then(function(){c.each(h.rows,function(b){b.activatePageRefresh()})})})}});"use strict";A.when("A").register("desktop-configurator-constants",function(c){return{AJAX_CALL_TIMEOUT:2E4,
DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:32,TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterPrimeWardrobe","twisterAvailability","deliveryPromise"],DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,
BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,DEFAULT_TEXT_SWATCH_SPACING:16,DEFAULT_IMAGE_SWATCH_SPACING:8,REDUCED_IMAGE_SWATCH_SPACING:4,viewEvents:{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",
LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",
EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",DIMENSION_EXPANDER_ICON_WRAPPER:".dimension-expander-icon-wrapper",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",
SWATCH_NODE_SELECTOR:".inline-twister-swatch",SLOT_NODE_SELECTOR:".dimension-slot-info",TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},
cssConstants:{BG_COLOR:"background-color",GREEN_BG_COLOR:"#D9EED9",WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";A.when("A").register("desktop-configurator-logger",function(c){function g(){if(!(this instanceof g))return new g;f||(f=this);return f}function l(c){if("undefined"!==typeof C.csa){var f=C.csa("Events",{producerId:"dp-rpcx"}),g=q.count(c)||0;f("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:c,valueToLog:g},{ent:"all"})}}
var n=c.$,f,q=C.ue;g.prototype={registerTwisterCore:function(c){this.twisterCore=c},logCSMDataOnLanding:function(){var c=0,f=0,g=0,p=this.twisterCore.util,t=p.tvm.dimensionInfo,B=this.twisterCore.state().length,u=Object.keys(p.tvm.dimCombinations).length;n.each(t,function(a,d){a=d.dimKey;p.isRequiredDim(a)&&g++;p.isSingletonDim(a)?f++:c++});q&&q.count&&(q.count("dpMobileTwisterDropdownPresent",c),l("dpMobileTwisterDropdownPresent"),q.count("dpMbileTwisterSingletonDim",f),l("dpMbileTwisterSingletonDim"),
q.count("dpMobileTwisterRequiredDim",g),l("dpMobileTwisterRequiredDim"),q.count("dpMobileTwisterDimSize",B),l("dpMobileTwisterDimSize"),q.count("dpMobileTwisterFamilySize",u),l("dpMobileTwisterFamilySize"),q.count("twisterPlus.inlineTwisterGV",1),l("twisterPlus.inlineTwisterGV"))},logCSMTagsOnLanding:function(f){function g(b,a,d){var e=[];if(a===d)e.push(""),b=b[a],c.$.isArray(b)?c.each(b,function(b,a){e.push(b)}):e.push(b);else{var m=Math.floor((a+d)/2);a=g.call(this,b,a,m);var f=g.call(this,b,m+
1,d);c.each(a,function(b,a){c.each(f,function(a,d){e.push(""===b?a:""===a?b:b+":"+a)})})}return e}function q(b){b&&l.push(b)}var p=this,l=[],n=!0,u=!0,a=[0,3,8,25,50,100,1E3,5E3],d=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,e,m;f.dimensionList&&(e="variation_dimension:"+f.dimensionList.length,c.each(f.dimensionList,function(b,a){p.addCSMTag(b)}));for(var r=1;r<a.length;r++)if(d<=a[r]){m="family_size_bucket:"+a[r-1]+"-"+a[r];break}else r===a.length-1&&(m="family_size_bucket:gt"+
a[r]);f.dimensionInfo&&c.each(f.dimensionInfo,function(b,a){b.isSingleton||(n=!1)});a=n?"SingletonFamily":"DesktopConfigurator";f.initDimCombination&&c.each(f.initDimCombination,function(b,a){-1===b.val&&(u=!1)});q(e);q(m);q(a);u&&q("defaultSelection");f=g.call(this,l,0,l.length-1);(function(b){var a=this;c.each(b,function(b,d){b&&a.addCSMTag(b)})}).call(this,f)},createFunctionTimerInstance:function(c){var f=this;return{eventType:c,start:function(){this.startTime=Date.now()},stop:function(){this.startTime&&
f.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(c){C.ue&&C.ue.tag&&C.ue.tag(c)},logCounter:function(c,f){q&&q.count&&(f===F?q.count(c,(q.count(c)||0)+1):q.count(c,f),l(c))},logBottomSheetPageUpdate:function(c){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},logSecViewTotalCount:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+
c)},logSecViewGV:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+c)},logSecViewClosed:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+c)},logDimensionCollapsed:function(c){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+c)},logDimensionExpanded:function(c){this.logCounter("twisterPlus.inlineTwister.dimExpand."+c)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},
logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},
logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")},logSeeAllLinkClick:function(c){this.logCounter("twisterPlus.inlineTwister.seeAllLinkClick."+c)}};return g});"use strict";A.when("A").register("twister-dynamic-style",function(c){function g(c,g){this.name=c;this.styleNode;this.rules=g||[];this.pendingRefresh}var l=c.$,n={};g.prototype={refresh:function(){var c=l("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?
(this.styleNode.replaceWith(c),delete this.styleNode,this.styleNode=c):(this.styleNode=c,this.styleNode.appendTo("body"))}};return{addCSSRules:function(c,l){n[c]?n[c].rules=l||[]:n[c]=new g(c,l);n[c].refresh()}}});"use strict";A.when("A","desktop-configurator-constants","desktop-configurator-twister-register").register("desktop-configurator-slot-manager",function(c,g,l){function n(c,a,d,e){this.twisterCore=c;this.batch={};this.currentBatch;this.maxSlotHeight={};this.minSlotHeight={};this.dynamicStyle=
a;this.slotIdentifierMap={};this.logger=d;this.auiPriceSize=e&&e.auiPriceSize?e.auiPriceSize:"m";this.currentlyUnavailableMessage=e&&e.stringTranslationMap?e.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=e&&e.desktopConfiguratorSlotsInMainView?e.desktopConfiguratorSlotsInMainView:[]}function f(u,a,d,e,m){var f=this.batch,b=this;f[u]=f[u]||[];f[u].push(d);clearTimeout(this.currentBatch);this.currentBatch=setTimeout(function(){var d=c.map(b.batch,function(b,
a){return a});b.twisterCore.slotsDimSum.get(d,function(d){var k=b.batch[d.ASIN];k&&(t.each(k,function(b,a){a(d)}),delete b.batch[d.ASIN]);p(b.batch)&&(k=Object.keys(b.maxSlotHeight),c.each(k,function(b){e(b,m&&b===a)}))})},0)}function q(c,a,d,e){d[a]=d[a]||{};d[a].uniqueCount=d[a].uniqueCount||0;var m="inline-twister-dimsum-loading-"+a+"-"+d[a].uniqueCount;d[a].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+m+(c?" loading-indicator-1":"")+(e?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',
promise:function(a,b){var d=t("."+m+":not(.loading-indicator-in-popover)").parent();d.length&&(d.html(a),b(d))}}}function v(c){return c.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function x(c,a,d){return v(B.default.call(this,c.content.twisterSlotDiv,a,d))}function y(c,a){if(!c||0===c.length)return a;if(0<c.find(".loading-indicator-1").length)return c[0].scrollHeight;if(0===c.find(".defaultSlotUnavailable").length)return a;c=c[0].scrollHeight;
a<c&&(a=c);return a}function p(c){for(var a in c)if(c.hasOwnProperty(a))return!1;return!0}var t=c.$,B={default:function(c,a,d){c=t("\x3cdiv\x3e"+c+"\x3c/div\x3e");var e=c.find(".price_slot_ppu"),m=c.find("#ms3slot"),f=c.find("#twisterAvailability"),b=c.find("#deliveryPromisePrefix"),k=c.find(".variationReviewsSection"),w=d?[]:this.desktopConfiguratorSlotsInMainView,g=c.find(".twister_swatch_price");f.length&&((g.length||d)&&-1===w.indexOf("twisterAvailability")&&f.parent().addClass("aok-hidden"),
f.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),f.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),f.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),f.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),a&&this.logger.logAvailabilitySlotRender());0<g.length?(-1===w.indexOf("price")&&g.addClass("aok-hidden"),g.addClass("inline-twister-swatch-price"),d=c.find(".a-price"),
0<d.length?d[0].dataset&&(d[0].dataset.aSize=this.auiPriceSize):(g.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),d="a-size-small",g.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(d),
e.length&&(d="twister-plus-inline-twister-ppu a-size-micro",e.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(d),a&&this.logger.logPPUSlotRender()),a&&this.logger.logPriceSlotRender()):(g=c.find("#sndbox-mobile-twister-price"),0<g.length&&a&&this.logger.logPriceSlotRender());m.length&&(m.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small"),-1===w.indexOf("ms3")&&m.addClass("aok-hidden"),a&&this.logger.logPrimeSlotRender());0<
b.length&&(b.removeClass("a-size-small a-color-secondary").addClass("a-color-base"),-1===w.indexOf("deliveryPromise")&&b.parent().addClass("aok-hidden"),b.find("br").remove(),e=b.find("b"),0===e.length&&(e=b.find("span")),e.length&&(m=" "+v(e.text()),e.addClass("aok-hidden"),b.append('\x3cspan style\x3d"font-weight: bold;"\x3e'+m+"\x3c/span\x3e")),a&&this.logger.logDeliverySlotRender());0<k.length&&(k.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),
-1===w.indexOf("variationReviews")&&k.addClass("aok-hidden"),a&&this.logger.logReviewsSlotRender());l.executeModifiers(c);return c.html()}};n.prototype={get:function(c,a,d,e,m,r,b){var k=this,g=this.twisterCore.slotsDimSum.get([c]);if(g[c])return x.call(k,g[c].Value,!1,b);var p=q(d,a,k.slotIdentifierMap,b);f.call(this,c,a,function(a){p.promise(x.call(k,a.Value,!0,b),r)},m,e);return p.loadingHtm},setState:function(c,a,d){this.minSlotHeight[a]||(this.minSlotHeight[a]=[]);this.maxSlotHeight[a]||(this.maxSlotHeight[a]=
[]);this.minSlotHeight[a][d]=this.minSlotHeight[a][d]||0;this.minSlotHeight[a][d]=y(c,this.minSlotHeight[a][d]);this.maxSlotHeight[a][d]=this.maxSlotHeight[a][d]||0;var e=this.maxSlotHeight[a];var m=this.maxSlotHeight[a][d];!c||0===c.length||0<c.find(".loading-indicator-1").length||(c=c[0].scrollHeight,m<c&&(m=c));e[d]=m;this.maxSlotHeight[a][d]=this.maxSlotHeight[a][d]>this.minSlotHeight[a][d]?this.maxSlotHeight[a][d]:this.minSlotHeight[a][d]},updateSlotHeight:function(f,a){var d=[],e;c.each(this.maxSlotHeight[f],
function(c,r){a?(d.push("#desktop-configurator-side-sheet #"+f+"dim_list .desktop-configurator-dim-row-"+r+" .dimension-slot-info {height: "+c+"px;}"),e="twister-plus-desktop-configurator-side-sheet-slot-height-"):(d.push("#inline-twister-expander-content-"+f+" .desktop-configurator-dim-row-"+r+" .dimension-slot-info {height: "+c+"px;}"),e="twister-plus-desktop-configurator-slot-height-")});this.dynamicStyle.addCSSRules(e+f,d)},resetMinSlotHeight:function(f){this.minSlotHeight[f]||(this.minSlotHeight[f]=
[]);this.minSlotHeight[f]=c.map(this.minSlotHeight[f],function(){return 0})},resetSlotHeight:function(f,a){this.maxSlotHeight[f]||(this.maxSlotHeight[f]=[]);this.dynamicStyle.addCSSRules((a?"twister-plus-desktop-configurator-side-sheet-slot-height-":"twister-plus-desktop-configurator-slot-height-")+f,[]);this.maxSlotHeight[f]=c.map(this.maxSlotHeight[f],function(){return 0})}};return n});"use strict";A.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",
function(c,g,l){function n(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null;this.updateSideSheetStatus={}}function f(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function q(a,d){c.each(a,function(a){var m="desktop-configurator-swatch-hover:"+d+"_sec";try{c.declarative.remove(a,m),c.declarative.create(a,m,{})}catch(f){A.log("Hover event subscribe failed with error: "+
this.name,u.ERROR,u.ATTRIBUTION)}})}function v(a){a=Array.prototype.slice.call(a);var d=t(a[0]).find("input");a=t(a[a.length-1]).find("input");this.keyDownEventHandler=y.bind(this,d,a);document&&document.addEventListener("keydown",this.keyDownEventHandler);c.delay(function(){d&&d.focus()})}function x(){if(this.mainViewDimContainer){var a=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];document&&document.removeEventListener("keydown",this.keyDownEventHandler);a&&a.focus()}}
function y(a,d,e){e.code&&"tab"===e.code.toLowerCase()&&(e.shiftKey?document&&document.activeElement===a[0]&&(e.preventDefault(),d.focus()):document&&document.activeElement===d[0]&&(e.preventDefault(),a.focus()))}function p(a){var d=t("#desktop-configurator-side-sheet-content-header").clone();d.removeClass("aok-hidden");d.find(".dim-name").text(a.dimensionDisplayText+":");d.find(".dim-value").text(a.displayValueText);var e=a.optionsText;e&&d.find(".dim-options").text(e.replace("###options",a.totalValueCount));
return d}var t=c.$,B=g.sideSheetSelectors,u=g.loggingConstants;n.prototype={init:function(a){var d=this,e=t("#twister-plus-inline-twister-container");0!==e.length&&(e=e[0].getBoundingClientRect().width,this.scrollbarWidth=this.getScrollbarWidth(),this.sideSheet=new l({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:g.SIDE_SHEET_ANIMATION_SPEED,width:e+g.SIDE_SHEET_PADDING+d.scrollbarWidth,onAfterHide:function(){a.logSecViewClosed(d.activeDimKey);c.each(d.swatchList,
function(a){var e=parseInt(a.getAttribute("data-idxInToggleSwatchList"),10),e=d.sideSheetData.getSwatchInfo(e);c.declarative.remove(a,"desktop-configurator-swatch-hover:"+d.activeDimKey+"_sec");d.sideSheetData.destroyPopover(e.id+"_sec")});x.call(d);d.updateSideSheetStatus[d.activeDimKey]&&d.updateSideSheetStatus[d.activeDimKey](d.activeDimKey,!1);f.call(d)}}))},open:function(a){this.activeDimKey=a.dimKey;this.sideSheetData=a;var d=t("#inline-twister-row-"+a.dimKey+" #tp-inline-twister-dim-values-container").find(".desktop-configurator-dim-row-0"),
e=t("#side-sheet-loader-container").clone().removeClass("aok-hidden"),f=e.find(".loader-container"),r=e.find("#side-sheet-loader").clone().removeClass("aok-hidden"),b,k,w=g.DEFAULT_TEXT_SWATCH_SPACING;a.isTextSwatch?(b=d.width()-g.BORDER_WIDTH,k=d.height()-g.BORDER_WIDTH):(k=d.find(".swatch-image-container"),w=0<k.closest(".reduced-image-swatch-margin").length,b=k.outerWidth(),k=k.outerHeight(),w=w?g.REDUCED_IMAGE_SWATCH_SPACING:g.DEFAULT_IMAGE_SWATCH_SPACING,r.css({marginLeft:w/2+"px",marginRight:w/
2+"px"}));r.width(b);r.height(k);c.each(d,function(){f.append(r.clone().addClass("side-sheet-loader-1"))});b=f.clone();b.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");e.append(b);a=p(a);e.prepend(a);e=e[0].outerHTML;this.sideSheet.updateWidth(this.getWidth(d,w));this.sideSheet.open(e)},update:function(a){this.mainViewDimContainer=t("#inline-twister-row-"+a.dimKey+" #tp-inline-twister-dim-values-container");var d=this.mainViewDimContainer.clone(),e=
d.find(B.DIMENSION_VALUES_LIST);e.attr("id",a.dimKey+"dim_list");var c=p(a);d.prepend(c);e.children().slice(1).removeClass("aok-hidden");e.attr("data-a-button-group",'{"name":"sec_'+a.dimKey+'"}');this.sideSheet.updateContent(d[0].outerHTML);a=this.sideSheet.container;this.swatchList=a.find(B.DIMENSION_VALUES_LIST).children().slice(1);q(this.swatchList,this.activeDimKey);this.dimValContainer=a.find(".desktop-configurator-side-sheet-content-header .dim-value");v.call(this,this.swatchList)},close:function(){this.sideSheet.close()},
registerToggleButtonGroup:function(a,d,e){var f=B.SEC_VIEW_TOGGLE_BUTTON_PREFIX+a,g=this;this.updateSideSheetStatus[a]=e;c.on("a:button-group:"+f+":toggle",function(b){g.sideSheet.close();b.selectedButton.buttonGroupName=a;d(b.selectedButton,a)})},updateDimVal:function(a){this.dimValContainer&&this.dimValContainer.length&&this.dimValContainer.text(a.subText)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;var a=document.body?C.innerWidth-document.body.clientWidth:-1;
0>a&&(a=g.DEFAULT_SCROLLER_WIDTH);return a},getWidth:function(a,d){var e=0;c.each(a,function(a){e+=a.getBoundingClientRect().width+d});return e+g.SIDE_SHEET_PADDING+this.scrollbarWidth}};return n});"use strict";A.when("A","a-popover","desktop-configurator-constants").register("desktop-configurator-popover-factory",function(c,g,l){function n(b){var a=y("\x3cdiv /\x3e"),d=y("\x3cspan /\x3e"),e=b.title,c=b.showImageInPopOver,m=!b.hideSlots;a.addClass("desktop-configurator-popover-content");d.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");
d.text(e);a.append(d);c&&(d=y("\x3cdiv /\x3e"),c=y("\x3cimg /\x3e"),c.attr("src",b.image),c.attr("data-a-image-source",b.image),c.attr("alt",e),d.append(c),a.addClass("visual-dimension"),d.addClass("desktop-configurator-image-block"),a.prepend(d));m&&f(a,b.slotNode);return a}function f(b,a){a="string"===typeof a?a:a.clone();var d=y("\x3cdiv /\x3e");b.find(".desktop-configurator-slot-block").remove();d.addClass("desktop-configurator-slot-block");d.html(a);q(d);b.append(d)}function q(b){var a=b.find(".price_slot_ppu"),
d=b.find("#ms3slot"),f=b.find(".twister_swatch_price"),g=b.find("#twisterAvailability"),p=b.find("#deliveryPromisePrefix"),l=b.find(".variationReviewsSection"),u=b.find(".default-slot-unavailable"),q=b.find(".loading-indicator-1");b=b.find(".twisterPrimeWardrobe");var h={variationReviews:l,price:f,ms3:d,twisterAvailability:g.parent(),deliveryPromise:p.parent(),ppu:a,twisterPrimeWardrobe:b};q.length&&(q.addClass("loading-indicator-in-popover"),0===e.length?q.addClass("aok-hidden"):q.removeClass("aok-hidden"));
c.each(m,function(a){h[a]&&(-1===e.indexOf(a)?h[a].addClass("aok-hidden"):(h[a].removeClass("aok-hidden"),a=r[a+"_styleSlot"],"function"===typeof a&&a.call(this,h)))});u.length&&u.removeClass("a-size-small").addClass("a-size-base")}function v(a,d,e,f){e=n({slotNode:e.slotNode,title:e.title,showImageInPopOver:e.showImageInPopOver,image:e.image,hideSlots:f});d=g.create(d,{name:a,inlineContent:e,closeButton:!1,padding:"none",activate:"none",restoreFocusOnHide:!1});p[a]=d;t[a]||(c.on("a:popover:afterShow:"+
a,function(a){c.delay(function(){y(u.DIMENSION_VALUES_LIST).removeClass("stop-scrolling-dc")})}),t[a]=!0);return d}function x(a,d,e){if(a=p[a])d=n({slotNode:d.slotNode,title:d.title,showImageInPopOver:d.showImageInPopOver,image:d.image,hideSlots:e}),a.update({content:d});return a}var y=c.$,p={},t={},B=l.POPOVER_DELAY,u=l.sideSheetSelectors,a=null,d=null,e=[],m=l.CONFIGURED_SLOTS,r={price_styleSlot:function(a){var d=a.ppu;a=a.price;a.length&&(a.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),
d.length&&d.removeClass("a-size-micro").addClass("a-size-small"))},ms3_styleSlot:function(a){a=a.ms3;a.length&&a.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},twisterAvailability_styleSlot:function(a){var d=a.twisterAvailability;d.length&&(a=a.ms3,d.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base"),a.length&&a.after(d))},deliveryPromise_styleSlot:function(a){a=a.deliveryPromise;a.length&&a.addClass("a-size-base")}};return{show:function(b,e,f,m){a=
this.exists(b)?x.call(this,b,f,m):v.call(this,b,e,f,m);clearTimeout(d);var g=this;d=c.delay(function(){y(u.DIMENSION_VALUES_LIST).addClass("stop-scrolling-dc");a&&a.show();g.updateIfCurrentlyActive(b,f.slotNode)},B)},exists:function(a){return!!p[a]},hide:function(b){(b=p[b])&&b.hide();a=null;clearTimeout(d)},updateIfCurrentlyActive:function(b,d){a&&a.$container&&a.attributes.name===b&&(b=a.$container.find(".desktop-configurator-popover-content"),f(b,d))},destroy:function(a){p[a]&&g.remove(a);delete p[a];
clearTimeout(d)},setVisibleSlotConfig:function(a){e=a}}});"use strict";A.when("A").register("desktop-configurator-twister-register",function(){var c=[];return{registerModifier:function(g){c.push(g)},executeModifiers:function(g){c.forEach(function(c){c.modify&&"function"===typeof c.modify&&c.modify(g)})}}});"use strict";A.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(c,g){var l=c.$,n=g.widgetSelectors,f=g.classes,q=g.cssConstants,v=g.loggingConstants;
g=function(){function f(){var a=l(n.IMAGE_THUMBNAIL).attr("src");return a&&a.length&&(a=a.split("."),2<a.length)?a[a.length-2]:!1}function g(a,d,e,c){c=c&&0<c.length?c:a.find(".a-button");d&&!e?(c.addClass("text-swatch-button-with-slots").removeClass("text-swatch-button"),a.find("hr").show(),a.find("hr").removeClass("aok-hidden")):(c.removeClass("text-swatch-button-with-slots").addClass("text-swatch-button"),a.find("hr").hide(),a.find("hr").addClass("aok-hidden"))}return{alignTextSwatches:function(a,
d,e){var f=0,g,b;c.each(a,function(a){a.domNode&&(a.isVisible||d||e)&&(g=a.domNode.attr("data-idxInToggleSwatchList"),b=e?l("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+g+"]"):a.domNode,a=b.find(".swatch-title-text-display"),a.length&&a[0].style.removeProperty("height"),a=a?a.height():0,f<a&&(f=a))});c.each(a,function(a){a.domNode&&(a.isVisible||d||e)&&(g=a.domNode.attr("data-idxInToggleSwatchList"),b=e?l("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+
g+"]"):a.domNode,b.find(".swatch-title-text-display").height(f))})},createSwatch:function(a,d,e,c,f,b,k){var p=!d.unavailable,q=d.isVisible,l=d.selected,n=d.showSlot,v=d.slotHtm;e="#"+e;if(b.length)return b=b.clone(),b.removeClass("swatch-prototype"),f&&b.addClass("slots-hidden"),b.attr("data-idxInToggleSwatchList",c),c=b.find(e).attr("id",d.id),b.find(e+"-announce").attr("id",d.id+"-announce"),b.find("input").attr({name:d.name,"aria-labelledby":d.id+"-announce"}),b.find("text"===a?".swatch-title-text-display":
"square_image"===a?".swatch-title-text":".swatch-text").text(d.text),p||c.addClass("a-button-unavailable"),l&&c.addClass("a-button-selected"),"text"!==a&&(l=b.find(".swatch-image"),l.addClass("inline-twister-manual-load"),l.attr({"data-a-image-source":d.image||"",id:"inline-twister-image-"+d.name,alt:d.text})),l=b.find(".dimension-slot-info"),l.length&&(l.attr("id","dimension-slot-info-"+d.name),n?p?0<v.length&&l.html(v):l.html(d.defaultSlotUnavailable):b.find("text"===a?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),
"text"===a&&g(b,n,f,c)),k.append(b),q||b.addClass("aok-hidden"),b},getThumbnailImageUrlForPhysicalId:function(a){return a&&a.length&&(a=a.split("."),2<a.length)?(a.splice(-2,1,f()),a.join(".")):!1},updateSlotSectionInTextSwatch:g}}();var x=function(g){function p(a,d,e,c,f,b,k,q){this.id=a.id;this.unavailable=!!a.unavailable;this.selected=!!a.selected;this.showSlot=a.showSlot;this.slotHtm=a.slotHtm;this.isImageSwatch=!d;this.asin=a.asin;this.pageUrl=a.pageUrl;this.hideSlotsFromMainView=f;var n=d?"text":
a.isCirclularImageSwatch?"circular_image":"square_image";this.domNode=q?l(q):g.createSwatch(n,a,e,c,f,b,k);this.isVisible=a.isVisible;this.imageUrl=a.image;this.popoverImage=a.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=d?".slots-padding":".dimension-slot-info";this.title=a.text;this.name=a.name;this.subscribeToHoverEvent(e)}p.prototype={setState:function(a,d,e,c){this.selected=!!a.selected;this.updateAvailablity(a);this.updateSlotNode(a,d,e);this.updateVisibility(a);this.updateSwatchIndexInDomNode(c);
return this},getSlotNode:function(a){this.slotNode||(this.slotNode=this.domNode.find(n.SLOT_NODE_SELECTOR));if(!a)return this.slotNode;a=this.slotNode?this.slotNode.attr("id"):"";return l("#desktop-configurator-side-sheet").find("#"+a)},updateSlotNode:function(a,d,e){this.slotNode||(this.slotNode=this.domNode.find(n.SLOT_NODE_SELECTOR));this.showSlot!==a.showSlot&&((this.showSlot=a.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),
this.isImageSwatch||g.updateSlotSectionInTextSwatch(this.domNode,this.showSlot,this.hideSlotsFromMainView));this.slotHtm!==a.slotHtm&&(d&&l("#tp-inline-twister-sec-view-"+e+" #"+this.slotNode.attr("id")).html(a.slotHtm),this.slotNode.html(a.slotHtm),this.slotHtm=a.slotHtm)},updateAvailablity:function(a){this.toggleButton||(this.toggleButton=this.domNode.find(n.TOGGLE_BUTTON_SELECTOR));(this.unavailable=a.unavailable)?this.toggleButton.addClass(f.A_BUTTON_UNAVAILABLE):this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)},
updateSelection:function(){this.toggleButton||(this.toggleButton=this.domNode.find(n.TOGGLE_BUTTON_SELECTOR));this.selected?(this.toggleButton.addClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)):(this.toggleButton.removeClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_FOCUS))},updateVisibility:function(a){a.isVisible?this.domNode.removeClass(f.AOK_HIDDEN):this.domNode.addClass(f.AOK_HIDDEN);this.isVisible=a.isVisible},subscribeToHoverEvent:function(a){a=
"desktop-configurator-swatch-hover:"+a;try{c.declarative.remove(this.domNode,a),c.declarative.create(this.domNode,a,{})}catch(d){A.log("Hover event subscribe failed with error: "+this.name,v.ERROR,v.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(a){this.domNode&&this.domNode.attr("data-idxInToggleSwatchList",a)},getTopPosition:function(){var a=this.domNode.position();return this.topPosition=a?a.top:0}};return p}(g),y=function(g,p){function a(a,e,f,g){var b=this;this.isTextSwatch=a.isTextSwatch;
this.name=a.name;this.domNode=l(n.EXPANDER_CONTENT_PREFIX+a.name);this.title=g;this.selectedSwatch=null;this.swatches={};this.orderedSwatchList=[];this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRefreshActive=!1;this.totalSwatchCount=a.totalSwatchCount||0;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=e.autoNotificationCallback;this.rowContainer=f;this.swatchListContainer=this.domNode.find(n.DIMENSION_VALUES_LIST);this.markAutoUpdated=
!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;this.windowResizeCallback=e.windowResizeCallback;this.preserveNaturalSwatchOrder=a.preserveNaturalSwatchOrder;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;this.swatchPrototypeNode=l("#"+a.name).closest(n.SWATCH_NODE_SELECTOR);this.swatchPrototypeNodeParent=this.swatchPrototypeNode.parent();c.on("a:button-group:"+this.name+":toggle",function(a){var d=parseInt(a.selectedButton.buttonName,10),e=b.swatches[d];e?b.isPageRefreshActive?(b.isUserInteracting=
!0,d=e.unavailable,e.updateSelection(),b.autoNotificationCallback&&b.autoNotificationCallback(d,!0),b.onChange&&b.onChange(b.swatches,a.selectedButton,b.markAutoUpdated),b.setAutoUpdated(!1)):e.pageUrl&&(C.location.href=e.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+d+" ; Swatch length: "+Object.keys(b.swatches).length,A.log(a,v.ERROR,v.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+
a.name+"_sec",!0);if(this.isTextSwatch)c.on("resize",function(){0<b.displaySwatches.length&&(b.repopulateDisplaySwatches(),b.alignTextSwatches(),b.alignTextSwatchNodesInLastRow(),"function"===typeof b.windowResizeCallback&&b.windowResizeCallback(b.name))})}a.prototype={setState:function(a,e,f,g){var b=this,k,l=[],q=[],n=[];c.objectIsEmpty(e)||(c.each(e,function(e,c){if(!b.swatches[c]&&(a.swatches[c].isVisible||f)){var g=new p(a.swatches[c],b.isTextSwatch,b.name,c,b.hideSlotsFromMainView,b.swatchPrototypeNode,
b.swatchPrototypeNodeParent);g.subscribeToHoverEvent(b.name);b.swatches[c]=g;!b.isTextSwatch&&b.swatches[c]&&b.swatches[c].domNode&&n.push(b.swatches[c].domNode.find(".inline-twister-manual-load")[0])}q[e]=c}),this.swatchIdxOrder=q,g||(this.resetToggleSwatchContainer(),this.displaySwatches=[]),c.each(this.swatchIdxOrder,function(a,d){if(a=b.swatches[a])a&&b.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(b.name),b.addToDisplaySwatches(a,b.displaySwatches)}));c.each(a.swatches,function(a,
d){if(b.swatches[d])k=a.selected?b.swatches[d]:k,b.swatches[d].selected=!!a.selected,l.push({index:d,data:a});else{if(a.isVisible||f)b.swatches[d]=new p(a,b.isTextSwatch,b.name,d,b.hideSlotsFromMainView,b.swatchPrototypeNode,b.swatchPrototypeNodeParent),b.swatches[d].subscribeToHoverEvent(b.name),b.addToDisplaySwatches(b.swatches[d],b.displaySwatches),!b.isTextSwatch&&b.swatches[d]&&b.swatches[d].domNode&&n.push(b.swatches[d].domNode.find(".inline-twister-manual-load")[0]);a.selected&&(k=b.swatches[d])}});
this.selectedSwatch&&this.selectedSwatch.updateSelection();k&&k.updateSelection();c.each(l,function(a,d){b.swatches[a.index].setState(a.data,f,b.name,a.index)});this.isTextSwatch&&(c.objectIsEmpty(e)?this.alignTextSwatchNodesInLastRow():this.alignTextSwatches());b.selectedSwatch&&k&&b.selectedSwatch!==k&&!b.isUserInteracting&&b.autoNotificationCallback(!0);b.selectedSwatch=k;b.isUserInteracting=!1;n.length&&c.loadImageManually(n);return this},getSlotNodes:function(a){return c.map(this.displaySwatches,
function(e){return c.map(e,function(e){return e.getSlotNode(a)})})},setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,e){c.each(this.displaySwatches,function(c){g.alignTextSwatches(c,a,e)})},alignTextSwatchNodesInLastRow:function(){var a=this.domNode.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)");if(1<a.length){var e=a[a.length-1],f=a[a.length-2];e&&f&&e.getBoundingClientRect().top===f.getBoundingClientRect().top&&(a=c.map(a.slice(a.length-
(a.length%this.numberOfSwatchesPerRow||this.numberOfSwatchesPerRow),a.length),function(a){return this.swatches[a.getAttribute("data-idxInToggleSwatchList")]},this),g.alignTextSwatches(a))}},resetToggleSwatchContainer:function(){var a=l(this.domNode.find(".a-button-list").children()[0]);this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;c.each(this.swatches,function(e,c){e.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=
a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,e){e=new p(a,this.isTextSwatch,this.name,a.name,this.hideSlotsFromMainView,this.swatchPrototypeNode,this.swatchPrototypeNodeParent,e);this.swatches[a.name]=e;this.initialVisibleSwatchList[a.name]=e;this.selectedSwatch=a.selected?e:this.selectedSwatch;
this.orderedSwatchList.push(e);return e},activatePageRefresh:function(){this.isPageRefreshActive=!0;this.domNode.find(".page-load-link").remove()},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,e){var f=this;c.declarative(a,"mouseenter mouseleave",function(a){var b=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),b=f.getSwatch(b);a.data={slotNode:a.$currentTarget.find(b.slotNodeIdentifier),showImageInPopOver:b.isImageSwatch&&!!b.popoverImage,
unavailable:b.unavailable,showSlot:b.showSlot,selected:b.selected,title:b.title,name:b.name,id:e?b.id+"_sec":b.id,image:b.popoverImage};f.hoverHandler(f.name,a)})},addToDisplaySwatches:function(a,e){var c=f.ROW_IDENTIFIER_PREFIX;if(0===e.length)e.push([a]);else{var g=e[e.length-1];g&&g.length===this.numberOfSwatchesPerRow?e.push([a]):g.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(c+(e.length-1).toString())},repopulateDisplaySwatches:function(){if(0!==this.displaySwatches.length){var a=
[],e=0,g,p=this;c.each(this.displaySwatches,function(b,k){c.each(b,function(b,c){0===a.length?a.push([b]):0===e?(g=a[0][a[0].length-1],b.getTopPosition()!==g.getTopPosition()?(e=a[0].length,p.numberOfSwatchesPerRow=e,p.addToDisplaySwatches(b,a)):(a[0].push(b),p.removeSwatchRowIdentifier(b),b.domNode&&b.domNode.addClass(f.ROW_IDENTIFIER_PREFIX+(0).toString()))):p.addToDisplaySwatches(b,a)})});0===e&&(this.numberOfSwatchesPerRow=e=a[0].length);this.displaySwatches=a}},removeSwatchRowIdentifier:function(a){a.domNode&&
a.domNode.removeClass(function(a,d){return(d.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||[]).join(" ")})},createDisplaySwatches:function(){var a=this;c.each(this.orderedSwatchList,function(e){a.addToDisplaySwatches(e,a.displaySwatches)})},removeMisplacedSwatch:function(){var a=this.displaySwatches[this.displaySwatches.length-1],e=a[a.length-1],c=e.name;e.domNode&&e.domNode.remove();delete this.swatches[c];this.selectedSwatch&&this.selectedSwatch.name===c&&(this.selectedSwatch=null);1<a.length?
a.pop():this.displaySwatches.pop()},removeInitiallyHiddenSwatches:function(){for(var a=this.domNode.find(".inline-twister-swatch.aok-hidden:not(.swatch-prototype)"),e=a.length-1;0<=e;e--){var c=a[e];c.parentNode.removeChild(c)}}};return a}(g,x),p=function(f){function g(a){this.mainText=a.mainText;this.subText=a.subText;this.dimKey=a.dimKey;this.titleSelectorPrefix=a.titleSelectorPrefix;this.titleValueSelector=a.titleValueSelector;this.domNode=l("#"+this.titleSelectorPrefix+this.dimKey)}g.prototype=
{refresh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},setState:function(a){return c.equals(a,l.extend({},this))?this:(l.extend(this,a),this.refresh())},getData:function(){return{mainText:this.mainText,subText:this.subText}}};return g}(g),t=function(g,p,a){function d(a,d,g,b,k){function v(){x=x||t.domNode.find(".dimension-heading");x.css(q.BG_COLOR,q.GREEN_BG_COLOR);
c.delay(function(){c.animate(x,{"background-color":q.WHITE_BG_COLOR},200)},1E3)}var t=this;this.disableCollapseFunctionality=g.inlineTwisterData?g.inlineTwisterData.disableCollapseFunctionality:!1;this.stringTranslationMap=g.inlineTwisterData?g.inlineTwisterData.stringTranslationMap:{};this.title=d?new p(d):null;this.dimKey=g.dimKey;this.domNode=l("#"+a+this.dimKey);this.showSlot=g.showSlot;this.logger=k;this.isTwisterCoreInitialized=this.markAutoUpdated=!1;this.expanderContent=t.domNode.find(n.EXPANDER_CONTENT_PREFIX+
this.dimKey);this.expanderHeader=t.domNode.find(n.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=t.domNode.find(n.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=t.domNode.find(n.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=t.domNode.find(n.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=b;this.autoNotificationExpanded=t.domNode.find(n.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=t.autoNotificationExpanded.text();this.imageThumbnail=t.domNode.find(n.IMAGE_THUMBNAIL);
this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.isExpanded=this.expanderContent.hasClass("dimension-expander-content-expand");var x;this.autoNotificationCallback=function(a,b){var e=t.autoNotificationExpandedText;a?t.isExpanded&&b?(t.autoNotificationExpanded.find("."+f.A_COLOR_ATTAINABLE).html(e),t.autoNotificationExpanded.removeClass(f.AOK_HIDDEN)):(v(),t.setAutoUpdated(!0)):t.hideAutoNotification()};this.disableCollapseFunctionality||c.declarative("toggle-dimension-expander-"+
this.dimKey,"click",function(a){t.isExpanded?t.collapse():t.expand();t.hideAutoNotification()})}d.prototype={setState:function(a,d,c,b,g,p){this.toggleSwatch&&c!==this.dimKey&&this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,d,g,p);g||b&&this.title&&this.title.setState(b)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&
this.icon.addClass(f.ROTATE);this.expandedText&&this.expandedText.removeClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(f.AOK_HIDDEN);this.imageThumbnail.addClass(f.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:
"",d=this.title.getData(),a=a.replace("###dimension",d.mainText).replace("###value",d.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToCollapse:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(n.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}this.markAutoUpdated&&(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);
this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(f.ROTATE);this.expandedText&&this.expandedText.addClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.removeClass(f.AOK_HIDDEN);this.imageThumbnail.removeClass(f.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);
if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",d=this.title.getData(),a=a.replace("###dimension",d.mainText).replace("###value",d.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(n.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,
d){a=this.expanderHeader.attr("aria-label").replace(a.subText,d.subText);this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(n.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)},setThumbnailImage:function(a){(a=g.getThumbnailImageUrlForPhysicalId(a))&&this.imageThumbnail.attr("src",a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():
{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRefresh:function(){this.toggleSwatch&&this.toggleSwatch.activatePageRefresh()},showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},hideSideSheetLink:function(){this.sideSheetLink.addClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,d,c){var b=this;this.expanderContent.animate({"max-height":a+"px"},
d,function(){b.setMaxHeight("");c&&c()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},createDisplaySwatches:function(){this.toggleSwatch&&this.toggleSwatch.createDisplaySwatches()},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(f.AOK_HIDDEN)},initializeComponents:function(d,f,g){if(!this.toggleSwatch&&d){var b=this.title.getData();this.toggleSwatch=new a(d,{windowResizeCallback:g.handleWindowResize,autoNotificationCallback:this.autoNotificationCallback},
this.domNode,b.mainText)}this.isTextSwatch=d?d.isTextSwatch:!0;this.rowCallbacks=c.extend(this.rowCallbacks,g);this.totalSwatchCount=d?d.totalSwatchCount:0;this.showSlot=f;var k=this;c.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof k.rowCallbacks.showSideSheet&&k.isTwisterCoreInitialized&&(k.rowCallbacks.showSideSheet(k.dimKey,k.showSlot,k.title.getData()),k.hideAutoNotification())})},postInitialize:function(){this.isTwisterCoreInitialized=!0;
var a={dimKey:this.dimKey};this.toggleSwatch&&this.toggleSwatch.removeInitiallyHiddenSwatches();this.isExpanded&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0)}};return d}(g,p,y);return{Swatch:x,ToggleSwatch:y,Title:p,Row:t,utils:g}});"use strict";A.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(c,g){function l(c){var l=c.id&&"string"===typeof c.id,q=1===x("#"+c.id).length;if(l&&q)this.id=c.id,this.shouldRenderHTMLString=!!c.shouldRenderHTMLString,
this.animationDuration=c.animationDuration||300,this.container=g.getContainer(c.id),this.onBeforeShow=c.onBeforeShow,this.onAfterHide=c.onAfterHide,l=c.width||580,(q=this.container)&&q.width(l),v(c.id,l),f.call(this);else throw c="Side sheet initialisation failed: "+(l?"Side sheet not present in DOM, or multiple instances of side sheet ID "+c.id+" exist":"Invalid Side sheet ID"),A.log(c,"ERROR","DetailPageSideSheet"),c;}function n(c){var f=this.container;c=this.shouldRenderHTMLString?x(c):x(c).clone();
f.html(c);c.css("display","block");f.removeClass("aok-hidden")}function f(){var f=this;c.declarative("close-detail-page-side-sheet:"+this.id,"click",function(){f.close()});c.declarative("open-detail-page-side-sheet:"+this.id,"click",function(c){f.open(c&&c.data?c.data.content:null)})}function q(c){c.code&&"escape"===c.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",y))}function v(c,f){c=x("#"+c+"-background .close-button");c.length&&(c[0].style.marginRight=f+10+
"px")}var x=c.$,y=null;l.prototype={open:function(c){if(c&&"string"===typeof c){n.call(this,c);if(this.onBeforeShow)this.onBeforeShow();g.showSideSheet(this.id,this.animationDuration);y=q.bind(this);document&&document.addEventListener("keydown",y)}else A.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){g.closeSideSheet(this.id,this.animationDuration);g.resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(c){var f=
this.container;f&&f.width(c);v(this.id,c)},updateContent:function(c){c&&"string"===typeof c?n.call(this,c):A.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")}};return l});"use strict";A.when("A").register("detail-page-side-sheet-handlers",function(c){function g(c,g){f("#"+c+" .detail-page-side-sheet-content").show(function(){n({right:"0px"},c,g)})}function l(c,g){f("#"+c+" .detail-page-side-sheet-content").show(function(){n({right:"-600px"},c,g)})}function n(g,
l,n){c.animate(f("#"+l+" .detail-page-side-sheet-content"),g,n)}var f=c.$;return{showSideSheet:function(c,l){f("body").css("overflow","hidden");f(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");f("#"+c).removeClass("aok-hidden");g(c,l)},closeSideSheet:function(c,g){l(c,g);f(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");f("#"+c).addClass("aok-hidden");f("body").css("overflow","scroll")},getContainer:function(c){return f("#"+c).find(".detail-page-side-sheet-content")},resetSideSheetContainer:function(c){c.html("")}}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,h=f._namespace||f.attributeErrors,b=h?h("DetailPageABSMultiSelectionIngressAssets",""):f;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,f,h){e.when("A","dp-latency-marker","abs_msx_ingress_constants","abs_msx_html_builder","abs_msx_ingress_metrics","abs_msx_ingress_utils").register("abs_msx_ingress",function(b,g,a,u,d,n){function v(c){document.body.style.overflow="hidden";b.ajax(c,{method:"get",success:w,error:function(c){k=
!0;d.registerCounter(a.msxMetrics.MSX_AJAX_CALL_TO_FETCH_MSX_CONTENT_FAILED);l()}})}function w(c){m=!0;c=c.trim();/^\s*$/.test(c)?(k=!0,d.registerCounter(a.msxMetrics.MSX_EMPTY_RESPONSE_AFTER_AJAX_CALL_SUCCESS),l()):(h(c),e.when("msx_slotDataLoader").execute(function(a){a.initialLoad()}))}function h(c){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));var d=document.getElementById(a.MSX_SIDE_SHEET_TOP_CONTAINER_HTML_ID);d&&d.insertAdjacentHTML("beforeend",c)}function x(){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));
var c=document.getElementById(p),d=document.getElementById(q);c.style.display="block";n.deviceTypeMobile()?(null!==d&&(d.style.display="block",d.style.height="100vh"),c.style.height="100vh"):(b.show(document.getElementById(a.MSX_BACKGROUND_HTML_ID)),null!==d&&(d.style.width="605px"),c.style.width="605px");document.body.style.overflow="hidden"}function r(){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));var c=document.getElementById(p),d=document.getElementById(q);n.deviceTypeMobile()?(d&&(d.style.height=
"0"),c.style.height="0"):(b.hide(document.getElementById(a.MSX_BACKGROUND_HTML_ID)),d&&(d.style.width="0"),c.style.width="0");document.body.style.overflow="scroll"}function l(){b.hide(document.getElementById(a.MSX_SPINNER_HTML_ID));document.getElementById(a.MSX_SIDE_SHEET_TOP_CONTAINER_HTML_ID).appendChild(document.getElementById(a.MSX_ERROR_MSG_ID));document.getElementById(a.MSX_ERROR_MSG_ID).classList.remove(a.MSX_AOK_HIDDEN_CLASS)}var t=!1,m=!1;g=a.viewEvents.CLICK;var q=a.msxSideSheetSelectors.MSX_SIDE_SHEET,
p=a.msxSideSheetSelectors.MSX_SIDE_SHEET_TOP_CONTAINER,k=!1;b.declarative("msxIngressClick",g,function(c){c=c.$event;c.stopPropagation();f.history.state&&f.history.state.page===a.MSX_STATE||f.history.pushState({page:a.MSX_STATE},null);f.onpopstate=function(){r()};d.registerCounter(a.msxMetrics.MSX_INGRESS_LINK_CLICKED);m||t||(e.register("msxIngressClick"),t=!0);u.createMsxContainer();c&&c.currentTarget&&c.currentTarget.dataset&&c.currentTarget.dataset.msxingressclick?(c=JSON.parse(c.currentTarget.dataset.msxingressclick).asin,
c=a.GXA_PREFIX_URL+c+a.EXPERIENCE_ID_AND_SHOW_FEATURES_SUFFIX_URL,b.show(document.getElementById(a.MSX_SPINNER_HTML_ID)),m||k?x():v(c)):(d.registerCounter(a.msxMetrics.MSX_INGRESS_CLICK_EVENT_FAILED),l())});b.declarative("close-multi-selection-experience",g,function(a){r()})});"use strict";e.when("dp-latency-marker").register("abs_msx_ingress_constants",function(b){return{MSX_SIDE_SHEET_OPENED:"msxSideSheetOpened",GXA_PREFIX_URL:"/gp/product/ajax?asin\x3d",EXPERIENCE_ID_AND_SHOW_FEATURES_SUFFIX_URL:"\x26experienceId\x3dabsMultiSelection\x26showFeatures\x3dmsxPrimaryWidget",
viewEvents:{CLICK:"click"},msxSideSheetSelectors:{MSX_SIDE_SHEET:"multi-selection-experience",MSX_SIDE_SHEET_TOP_CONTAINER:"msx-top-container"},msxSideSheetBackgroundSelectors:{MSX_BACKGROUND_DECLARATIVE_CONTENT:"\x3cspan class\x3d'a-declarative' data-action\x3d'close-multi-selection-experience' data-close-multi-selection-experience\x3d'{}'\x3e\x3c/span\x3e",MSX_BACKGROUND_CONTENT:"\x3cdiv id\x3d'msx-background' class\x3d'a-section msx-darken-background'\x3e\x3c/div\x3e",MSX_SPINNER_CONTAINER_CONTENT:"\x3cdiv id\x3d'multi-selection-experience-spinner' class\x3d'a-spinner-wrapper aok-hidden'\x3e\x3c/div\x3e",
MSX_CONTAINER_CONTENT:"\x3cdiv id\x3d'msx-top-container' class\x3d'a-section'\x3e\x3c/div\x3e"},msxMetrics:{MSX_AJAX_CALL_TO_FETCH_MSX_CONTENT_FAILED:"ABDpxMsx.ajaxCallToFetchMsxContentFailed",MSX_EMPTY_RESPONSE_AFTER_AJAX_CALL_SUCCESS:"ABDpxMsx.emptyResponseAfterAjaxCallSuccess",MSX_INGRESS_CLICK_EVENT_FAILED:"ABDpxMsx.ingressClickEventFailed",MSX_INGRESS_LINK_CLICKED:"ABDpxMsx.ingressLinkClicked"},HTML_BODY_TAG:"body",MSX_ANIMATION_CONTAINER:"\x3cspan class\x3d'msx-spinner-container'\x3e",MSX_ANIMATION_CONTAINER_INNER:"\x3cspan class\x3d'msx-spinner-container-inner'\x3e",
MSX_PAGE_LOAD_ANIMATION_CUSTOM:"\x3cspan class\x3d'msx-animation msx-page-load'\x3e\x3c/span\x3e",HTML_SPAN_CLOSE_TAG:"\x3c/span\x3e",DIV_LOAD_TEXT:"\x3cdiv class\x3d'msx-load-text'\x3e",HTML_SIZE_BASE_COLOR_BASE:"\x3cspan class\x3d'a-size-base a-color-base'\x3e",MSX_FUN_STRING_SUSPENSEFUL_MUSIC:"MSX_FUN_STRING_SUSPENSEFUL_MUSIC",HTML_DIV_CLOSE_TAG:"\x3c/div\x3e",MSX_BACKGROUND_HTML_ID:"msx-background",MSX_SIDE_SHEET_TOP_CONTAINER_HTML_ID:"msx-top-container",MSX_SPINNER_HTML_ID:"multi-selection-experience-spinner",
MSX_ERROR_MSG_ID:"msx-error-msg-id",MSX_STATE:"MSX",MSX_AOK_HIDDEN_CLASS:"aok-hidden"}});"use strict";e.when("jQuery","dp-latency-marker","abs_msx_ingress_constants","abs_msx_spinner_builder").register("abs_msx_html_builder",function(b,e,a,f){var d=!1;return{createMsxContainer:function(){if(!d){var e=b(a.msxSideSheetBackgroundSelectors.MSX_BACKGROUND_CONTENT),g=b(a.msxSideSheetBackgroundSelectors.MSX_BACKGROUND_DECLARATIVE_CONTENT);e.appendTo(g);g.prependTo(a.HTML_BODY_TAG);var e=f.getSpinnerComponent(),
g=b(a.msxSideSheetBackgroundSelectors.MSX_SPINNER_CONTAINER_CONTENT),h=b(a.msxSideSheetBackgroundSelectors.MSX_CONTAINER_CONTENT);e.appendTo(g);g.appendTo(h);h.prependTo(a.HTML_BODY_TAG);d=!0}}}});"use strict";e.when("jQuery","dp-latency-marker","abs_msx_ingress_constants","msx-spinner-string").register("abs_msx_spinner_builder",function(b,e,a,f){return{getSpinnerComponent:function(){var d=a.MSX_ANIMATION_CONTAINER+a.MSX_ANIMATION_CONTAINER_INNER+a.MSX_PAGE_LOAD_ANIMATION_CUSTOM+a.HTML_SPAN_CLOSE_TAG,
d=d+(a.DIV_LOAD_TEXT+a.HTML_SIZE_BASE_COLOR_BASE+f.getSpinnerString(a.MSX_FUN_STRING_SUSPENSEFUL_MUSIC)+a.HTML_SPAN_CLOSE_TAG+a.HTML_DIV_CLOSE_TAG),d=d+a.HTML_SPAN_CLOSE_TAG;return b(d)}}});"use strict";e.when("dp-latency-marker").register("msx-spinner-string",function(b){var e={MSX_FUN_STRING_SUSPENSEFUL_MUSIC:"[Suspenseful music plays]"};return{getSpinnerString:function(a){return e[a]}}});"use strict";e.when("dp-latency-marker").register("abs_msx_ingress_metrics",function(b){return{registerCounter:function(b){f.ue&&
f.ue.count&&f.ue.count(b,(f.ue.count(b)||0)+1)}}});"use strict";e.when("dp-latency-marker").register("abs_msx_ingress_utils",function(b){return{deviceTypeMobile:function(){return!1}}})});
/* ******** */
(function(n){var f=window.AmazonUIPageJS||window.P,q=f._namespace||f.attributeErrors,d=q?q("ABPricingFreeFormQuantityPickerAssets",""):f;d.guardFatal?d.guardFatal(n)(d,window):d.execute(function(){n(d,window)})})(function(n,f,q){n.when("jQuery","A","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_amazonAPIPriceFormatter").register("abPricingFfqp_amazonAPIClient",function(d,f,g,a,c){return f.createClass({inclusions:function(){return{priceV1:"buyingOptions[].price(product.price/v1)",
quantityPricingTableV1:"buyingOptions[].quantityPricingTable(product.quantity-pricing-table/v1)",availabilityV2:"buyingOptions[].availability(product.availability/v2)"}},init:function(a){this._baseEndpoint="https://"+a.endpoint;this._baseUrl=this._baseEndpoint+"/api/marketplaces/"+a.marketplaceId+"/";this._defaultHeaders={"Accept-Language":a.language,"x-api-csrf-token":a.csrfToken,"x-cc-currency-of-preference":a.currencyOfPreference,"x-amzn-encrypted-slate-token":this._getSlateToken()};"object"===
typeof a.priceFormatConfig&&(this._aapiPriceFormatter=new c(a.priceFormatConfig));a=this._getValidatedClientId(a.clientId);this._metricScopeName=g.METRIC_SCOPE_NAME.AAPI_CLIENT.replace(g.AAPI_CLIENT_ID_PLACEHOLDER,a);this._statusMetricNameTpl=g.COUNTER_METRIC.AAPI_REQUEST_STATUS.replace(g.AAPI_CLIENT_ID_PLACEHOLDER,a)},_constructHeader:function(a,c){return"application/vnd.com.amazon.api+json; "+(""===a?"":'type\x3d"'+a+'"; ')+(""===c?"":'expand\x3d"'+c+'"; ')+'experiments\x3d"enableQuantityPricingTablePaginationField_dn2f4w34"'},
productV2:function(a){var c=["products",a.asin],g={Accept:this._constructHeader("product/v2",a.subresources.join(","))},c=this._constructUrl(c,a.parameters);this._get(a.success,a.error,c,g)},productQPT:function(a){var c={Accept:this._constructHeader("product.quantity-pricing-table/v1","")};this._get(a.success,a.error,this._baseEndpoint+a.url,c)},_getValidatedClientId:function(a){return"string"===typeof a&&0<a.length?a:g.UNSPECIFIED_CLIENT_ID},_get:function(c,k,f,m){var p=this;a.registerWidgetBodyBegin(this._metricScopeName);
m=d.extend(this._defaultHeaders,m);d.ajax({url:f,type:"GET",headers:m,xhrFields:{withCredentials:!0},timeout:g.AAPI_CLIENT_TIMEOUT}).done(function(b,e){p._handleAjaxSuccess(b,e,c)}).fail(function(b,e,a){p._handleAjaxError(e,a,k,b.status)}).always(function(b,e){p._handleAjaxComplete(e)})},_constructUrl:function(a,c){c=c||{};c=d.map(c,function(a,c){return c.toString()+"\x3d"+a.toString()}).join("\x26");return this._baseUrl+a.join("/")+(0<c.length?"?"+c:"")},_getSlateToken:function(){var a=document.querySelector('meta[name\x3d"encrypted-slate-token"]');
if(a)return a.content},_handleAjaxSuccess:function(c,g,d){this._aapiPriceFormatter&&this._aapiPriceFormatter.formatPrices(c);a.registerWidgetCriticalFeature(this._metricScopeName);a.registerWidgetLoaded(this._metricScopeName);d&&d(c,g)},_handleAjaxError:function(c,g,d,f){a.registerWidgetLoaded(this._metricScopeName);d&&d(c,g,f)},_handleAjaxComplete:function(c){"string"!==typeof c&&(c=g.UNSPECIFIED_REQUEST_STATUS);c=this._statusMetricNameTpl.replace(g.AAPI_REQUEST_STATUS_PLACEHOLDER,c);a.registerCounter(c)}})});
"use strict";n.when("A","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_priceFormatter").register("abPricingFfqp_amazonAPIPriceFormatter",function(d,f,g,a){return d.createClass({init:function(c){this._priceFormatter=new a(c)},formatPrices:function(a){g.registerWidgetBodyBegin(f.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER);try{this._formatPricesRec(a),g.registerWidgetCriticalFeature(f.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER)}catch(d){throw d;}finally{g.registerWidgetLoaded(f.METRIC_SCOPE_NAME.AAPI_PRICE_FORMATTER)}},
_formatPricesRec:function(a){if(this._isPriceObject(a))a.displayString=this._formatPrice(a.amount,a.currencyCode,a.displayString);else if("object"===typeof a)for(var g in a)a.hasOwnProperty(g)&&this._formatPricesRec(a[g])},_isPriceObject:function(a){return"object"===typeof a&&this._priceFormatter.isValidPrice(a.amount,a.currencyCode)},_formatPrice:function(a,g,d){return"string"===typeof d&&0<d.length?d:this._priceFormatter.format(a,g)}})});"use strict";n.when("A","abPricingFfqp_constants","abPricingFfqp_metrics").register("abPricingFfqp_priceFormatter",
function(d,f,g){return d.createClass({init:function(a){a=a||{};this._priceFormat=a.priceFormat;this._decimalSeparator=a.decimalSeparator;this._fractionDigits=parseInt(a.fractionDigits);this._groupingSeparator=a.groupingSeparator;this._groupingDigits=parseInt(a.groupingDigits);this._secondaryGroupingDigits=parseInt(a.secondaryGroupingDigits);this._minGroupingDigits=parseInt(a.minGroupingDigits);this._currencyCode=a.currencyOfPreference;this._validateInput();0===this._secondaryGroupingDigits&&(this._secondaryGroupingDigits=
this._groupingDigits)},format:function(a,c){a=parseFloat(a);isNaN(a)&&this._throwValidationError("amount");if(0>a)return"-"+this.format(-a,c);a=this._formatAmount(a);return this._currencyFormat(c).replace("{}",a)},isValidPrice:function(a,c){a=parseFloat(a);return!isNaN(a)&&0<=a&&this._isValidCurrencyCode(c)},_validateInput:function(){this._validatePriceFormat();this._validateSeparator("decimalSeparator",this._decimalSeparator);this._validateSeparator("groupingSeparator",this._groupingSeparator);this._validateDigitsCount("fractionDigits",
this._fractionDigits,0);this._validateDigitsCount("groupingDigits",this._groupingDigits,0);this._validateDigitsCount("secondaryGroupingDigits",this._secondaryGroupingDigits,0);this._validateDigitsCount("minGroupingDigits",this._minGroupingDigits,1);this._validateCurrencyCode()},_validatePriceFormat:function(){"string"===typeof this._priceFormat&&-1!==this._priceFormat.indexOf("{}")||this._throwValidationError("priceFormat")},_validateSeparator:function(a,c){"string"===typeof c&&0!=c.length||this._throwValidationError(a)},
_validateDigitsCount:function(a,c,g){("number"!==typeof c||isNaN(c)||c<g)&&this._throwValidationError(a)},_validateCurrencyCode:function(){this._isValidCurrencyCode(this._currencyCode)||this._throwValidationError("currencyOfPreference")},_isValidCurrencyCode:function(a){return"string"===typeof a&&/^[A-Z]{3}$/.test(a)},_throwValidationError:function(a){throw Error("[abPricingFfqp_priceFormatter] Invalid value for "+a);},_formatAmount:function(a){var c=this._halfEvenRound(a,this._fractionDigits).toString().split(".");
a=this._formatIntegerPart(c[0]);if(0==this._fractionDigits)return a;c=this._formatDecimalPart(2==c.length?c[1]:"");return[a,c].join(this._decimalSeparator)},_halfEvenRound:function(a,c){a*=Math.pow(10,c);var g=a%1;a=.500001<=g||1E-6>Math.abs(g-.5)&&1==Math.floor(a)%2?Math.ceil(a):Math.floor(a);return a/Math.pow(10,c)},_formatIntegerPart:function(a){if(0===this._groupingDigits||a.length<this._groupingDigits+this._minGroupingDigits)return a;for(var c=a.length,g=!0,d=[];0<c;){var f=this._secondaryGroupingDigits;
g&&(g=!1,f=this._groupingDigits);c<f?d.push(a.substr(0,c)):d.push(a.substr(c-f,f));c-=f}return d.reverse().join(this._groupingSeparator)},_formatDecimalPart:function(a){for(;a.length<this._fractionDigits;)a+="0";return a.substr(0,this._fractionDigits)},_currencyFormat:function(a){if(a===this._currencyCode)return this._priceFormat;this._isValidCurrencyCode(a)||this._throwValidationError("currencyCode");g.registerCounter(f.COUNTER_METRIC.FALLBACK_PRICE_FORMAT_USED);return a+" {}"}})});"use strict";
n.register("abPricingFfqp_constants",function(){return{METRIC_SCOPE_NAME:{AAPI_PRICE_FORMATTER:"b2b-ffqp-aapi-price-formatter",AAPI_CLIENT:"b2b-ffqp-aapi-client-{clientId}",AAPI_QPT:"b2b-ffqp-aapi-qpt",AAPI_SINGLE_QUANTITY:"b2b-ffqp-aapi-single-quantity",AUI_STATE_PARSING:"b2b-ffqp-aui-state-parsing",GET_QPT_REQUEST:"b2b-ffqp-get-qpt-request"},COUNTER_METRIC:{FALLBACK_PRICE_FORMAT_USED:"ABPricingFreeFormQuantityPicker.FallbackPriceFormatUsed",AAPI_REQUEST_STATUS:"ABPricingFreeFormQuantityPicker.AAPIClient.{clientId}.status.{status}",
AAPI_SINGLE_QUANTITY_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPISingleQuantityBONotFound",AAPI_SINGLE_QUANTITY_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPISingleQuantityBONotFoundExtractionFailed",AAPI_QPT_BO_NOT_FOUND:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableBONotFound",AAPI_QPT_MISSING:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableMissing",AAPI_QPT_MISSING_BO:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableMissing.{bo}",AAPI_QPT_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableError",
AAPI_QPT_ERROR_CODE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableError.{code}",AAPI_QPT_PRESENT:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePresent",AAPI_QPT_PAGINATES:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginates",AAPI_QPT_FETCH_PAGE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableFetchPage",AAPI_QPT_PAGE_FETCHED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePageFetched",AAPI_QPT_PAGINATION_COMPLETE:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationComplete",
AAPI_QPT_PAGE_MISSING:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationPageMissing",AAPI_QPT_EXTRACTION_FAILED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableExtractionFailed",AAPI_QPT_CONVERSION_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTableConversionFailed",AAPI_QPT_PAGINATION_PAGE_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationPageError",AAPI_QPT_PAGINATION_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationError",
AAPI_QPT_PAGINATION_404_ERROR:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePagination404Error",AAPI_QPT_PAGINATION_404_EXCEPTION:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePagination404Exception",AAPI_QPT_MAX_PAGINATION_DEPTH_REACHED:"ABPricingFreeFormQuantityPicker.AAPIQuantityPricingTablePaginationDepthReached",AAPI_QPT_WEBLABS_TRIGGERING_EXCEPTION:"ABPricingFreeFormQuantityPicker.WeblabTriggeringException",AAPI_DATA_MGR_INIT_FAILED:"ABPricingFreeFormQuantityPicker.AAPIDataManagerInitializationFailed",
QUANTITY_REFRESH_CHECK_ERROR:"ABPricingFreeFormQuantityPicker.QuantityRefreshCheckError",PAGE_WILL_REFRESH:"ABPricingFreeFormQuantityPicker.PageWillRefresh",NO_PAGE_REFRESH_QTY_AVAILABLE:"ABPricingFreeFormQuantityPicker.NoPageRefreshQtyAvailable",NO_PAGE_REFRESH_QTY_NOT_AVAILABLE:"ABPricingFreeFormQuantityPicker.NoPageRefreshQtyNotAvailable",AVAILABILITY_CHECK_QTY_AVAILABLE_SHOULD_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailableShouldRefresh",AVAILABILITY_CHECK_PAGE_WILL_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckPageWillRefresh",
AVAILABILITY_CHECK_QTY_AVAILABLE_NO_REFRESH:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailableNoRefresh",AVAILABILITY_CHECK_QTY_AVAILABLE:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyAvailable",AVAILABILITY_CHECK_QTY_NOT_AVAILABLE:"ABPricingFreeFormQuantityPicker.AvailabilityCheckQtyNotAvailable",AVAILABILITY_CHECK_ERROR:"ABPricingFreeFormQuantityPicker.AvailabilityCheckError",MISSING_AJAX_PARAMS:"ABPricingFreeFormQuantityPicker.MissingAjaxParams",SPLIT_OFFER_LINK_DISPLAYED:"SplitOfferLinkDisplayed"},
ERROR:{AAPI_DATA_MGR_INIT_FAILED:"AAPIDataManager initialization failed",MISSING_AJAX_PARAMS:"AAPIDataManager could not find the AJAX parameters"},AAPI_CLIENT_ID_PLACEHOLDER:"{clientId}",AAPI_METADATA_EXPERIMENTS:"x-api-exp-data",AAPI_REQUEST_STATUS_PLACEHOLDER:"{status}",AAPI_ERROR_CODE_PLACEHOLDER:"{code}",AAPI_BO_PLACEHOLDER:"{bo}",UNSPECIFIED_CLIENT_ID:"unspecified",UNSPECIFIED_REQUEST_STATUS:"unspecified",AAPI_CLIENT_TIMEOUT:6E3,AJAX_PARAMS_STATE_KEY:"quantityPickerAjaxParams",MAX_SUPPORTED_QTY:999,
MAX_PAGINATION_DEPTH:10,ADD_TO_CART_QUANTITY_CHANGE_EVENT:"addToCartQuantityChange",URL_PARAM_ID__BUYING_IN_BULK_QUANTITY:"quantity",URL_PARAM_ID__BUYING_IN_BULK_REFTAG:"ref_",URL_PARAM_ID__BUYING_IN_BULK_ASIN:"asin",URL_PARAM_VALUE__LIMITED_AVAILABILITY_REFTAG:"bbt_limit_order",WEBLAB_AUTOTRIGGER_ALLOWLIST:["AB_SAVINGS_STANDARDIZATION_EXPERIMENT_868536"]}});"use strict";n.when("jQuery","abPricingFfqp_constants","ready").register("abPricingFfqp_metrics",function(d,m){function g(a,g){f.ue&&f.ue.trigger&&
f.ue.trigger(a,g)}var a=!0;return{logError:function(a,g,d){f.ueLogError&&f.ueLogError(d,{logLevel:a,attribution:"ABPricingFreeFormQuantityPicker",message:g})},updateCounterTriggering:function(c){a=c},register:function(a){a.counter&&this.registerCounter(a.counter)},registerCounter:function(c){a&&f.ue&&f.ue.count&&f.ue.count(c,(f.ue.count(c)||0)+1)},registerWidgetBodyBegin:function(c){a&&f.uet&&f.uet("bb",c,{wb:1})},registerWidgetCriticalFeature:function(c){a&&f.uet&&f.uet("cf",c,{wb:1})},registerWidgetLoaded:function(c){a&&
f.uex&&f.uex("ld",c,{wb:1})},triggerWeblab:g,triggerWeblabIfAllowlisted:function(a,d){m.WEBLAB_AUTOTRIGGER_ALLOWLIST.includes(a)&&g(a,d)}}});"use strict";n.when("jQuery","A","abPricingFfqp_utils","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_quantityPickerDataManager").register("abPricingFfqp_quantityManager",function(d,m,g,a,c,h){function k(e,a){return(e=(new RegExp("(?:^|\\?|\x26)"+a+"\x3d(?:([^\x26#]*)|\x26|#|$)")).exec(e))?e[1]?decodeURIComponent(e[1].replace(/\+/g," ")):"":
q}function l(e,a,b){var c=e.split("#");e=c[0];e="?"===e[0]?e.substr(1):e;c=c[1];"undefined"!==typeof b&&null!==b?(b=a+"\x3d"+b,a=new RegExp("(^|\x26)("+a+"\x3d[^\x26]*)"),e=a.test(e)?e.replace(a,"$1"+b):e+((0!==e.length?"\x26":"")+b)):(a=new RegExp("(^|\x26)("+a+"\x3d[^\x26]*)"),a.test(e)&&(e=e.replace(a,""),"\x26"===e[0]&&(e=e.substr(1))));return"?"+e+("undefined"!==typeof c?"#"+c:"")}function r(e,a){for(var b in a)a.hasOwnProperty(b)&&(e=l(e,encodeURIComponent(b),encodeURIComponent(a[b])));return e}
function p(e){return f.location.protocol+"//"+f.location.host+f.location.pathname+r(f.location.search,e)}function b(){var e;e=parseInt(k(f.location.search,"qty"));e=isNaN(e)||1>e||e>a.MAX_SUPPORTED_QTY?1:e;this._initialQuantity=this.currentQuantity=e;this.wireUpSelectorBasedEvents()}b.prototype.getCurrentQuantity=function(){return this.currentQuantity};b.prototype.wireUpSelectorBasedEvents=function(){var e=this;n.when("A","jQuery","quanityChangePriceUpdate").execute(function(a,b,c){e.quantityChangePriceUpdater=
c;a.on("a:pageUpdate",function(){e.handleTwisterPageRefresh()})})};b.prototype.update3PPriceBlock=function(){if(!(this.leastMinimumOrderQuantity===q||1>=this.leastMinimumOrderQuantity)){var e=d(".price3P");e.hasClass("updatedPrice3P")||(e.addClass("updatedPrice3P"),this.quantityChangePriceUpdater.ajaxCall({qt:this.leastMinimumOrderQuantity,quantityPriceField:"quantity_price"}))}};b.prototype.handleTwisterPageRefresh=function(){this.update3PPriceBlock()};b.prototype.reloadPageForQuantity=function(e,
a){var b={};b.qty=e;b.psc=1;e="";"undefined"!==typeof a&&("undefined"!==typeof a.refTag&&(b.ref_=a.refTag),"string"===typeof a.selectedBuyingOption&&0<a.selectedBuyingOption.length&&(b.sbo=a.selectedBuyingOption),"undefined"!==typeof a.merchantId&&(b.smid=a.merchantId),"undefined"!==typeof a.anchorToDiv&&(e=a.anchorToDiv));a=p(b)+e;f.location.href=a};b.prototype.notifyQuantityTyped=function(e,b){this.quantityRefreshCheck({newQuantity:e,currentBuyBoxId:b.currentBuyBoxId,qdsForLockedMerchantEnabled:b.qdsForLockedMerchantEnabled,
success:function(e,g){c.registerCounter(e?a.COUNTER_METRIC.AVAILABILITY_CHECK_QTY_AVAILABLE:a.COUNTER_METRIC.AVAILABILITY_CHECK_QTY_NOT_AVAILABLE);b.callback({hasAvailability:e})},error:function(){c.registerCounter(a.COUNTER_METRIC.AVAILABILITY_CHECK_ERROR);b.callback({hasAvailability:!0})}})};b.prototype.buyboxRefreshCheck=function(e){var b=this;this.quantityRefreshCheck({newQuantity:e.newQuantity,currentBuyBoxId:e.currentBuyBoxId,qdsForLockedMerchantEnabled:e.qdsForLockedMerchantEnabled,startEvent:"quantityRefreshCheckStarted",
success:function(g,p){e.newQuantity===b.currentQuantity&&(g&&p?(c.registerCounter(a.COUNTER_METRIC.PAGE_WILL_REFRESH),b.reloadPageForQuantity(e.newQuantity,{activeBuyBoxId:e.activeBuyBoxId,selectedBuyingOption:e.selectedBuyingOption})):(c.registerCounter(g?a.COUNTER_METRIC.NO_PAGE_REFRESH_QTY_AVAILABLE:a.COUNTER_METRIC.NO_PAGE_REFRESH_QTY_NOT_AVAILABLE),e.callback({hasAvailability:g})),m.trigger("quantityRefreshCheckFinished"))},error:function(){c.registerCounter(a.COUNTER_METRIC.QUANTITY_REFRESH_CHECK_ERROR);
e.newQuantity===b.currentQuantity&&b.reloadPageForQuantity(e.newQuantity,{activeBuyBoxId:e.activeBuyBoxId,selectedBuyingOption:e.selectedBuyingOption})}})};b.prototype.notifyQuantityChanged=function(e,a){e=parseInt(e);if(this.currentQuantity!==e){this.currentQuantity=e;if(f.history!==q&&f.history.pushState!==q){var b={};b.qty=e;f.history.pushState({},"",p(b))}m.trigger("buyBoxQuantityChanged",a.senderId,e,{newQuantity:e,activeBuyBoxId:a.activeBuyBoxId,selectedBuyingOption:a.selectedBuyingOption});
m.trigger("notifyBuyingInBulkOptionClicked",e)}};b.prototype.quantityRefreshCheck=function(e){if(!0!==e.preventRefreshCheck){var a={asin:g.getPageState().asin,initialQuantity:this._initialQuantity,quantity:e.newQuantity,currentBuyBoxId:e.currentBuyBoxId,success:e.success,error:e.error};if(e.qdsForLockedMerchantEnabled){var b=k(f.location.search,"smid");"undefined"!==typeof b&&(a.merchantId=b)}"string"===typeof e.startEvent&&m.trigger(e.startEvent);h.getInstance().refreshCheck(a)}};b.prototype.fetchAllTiersForQuantityDiscountTable=
function(e){var a=this.isQPTBuyBoxAwareEnabled(e),b={asin:g.getPageState().asin,enableQPTPagination:"true"};a&&(b.currentBuyBoxId=e.activeBuyBoxId);if(e.qdsForLockedMerchantEnabled){var c=k(f.location.search,"smid");"undefined"!==typeof c&&(b.merchantId=c)}c=e.enableQuantityPricingTablePagination;"undefined"!==c&&(b.enableQPTPagination=0==c?"false":"true");var p=this;this.triggerBuyBoxAwareEvent("fetchQuantityDiscountTableStarted",e);b.success=function(b){a?m.trigger("fetchQuantityDiscountTableCompleted",
b,e.senderId):m.trigger("fetchQuantityDiscountTableCompleted",b)};b.error=function(){p.triggerBuyBoxAwareEvent("fetchQuantityDiscountTableError",e)};h.getInstance().getQuantityPricingTable(b)};b.prototype.isQPTBuyBoxAwareEnabled=function(e){return e&&e.senderId&&e.activeBuyBoxId};b.prototype.triggerBuyBoxAwareEvent=function(e,a){this.isQPTBuyBoxAwareEnabled(a)?m.trigger(e,a.senderId):m.trigger(e)};b.prototype.notifyBuyingInBulkOptionClicked=function(e){m.trigger("notifyBuyingInBulkOptionClicked",
e)};b.prototype.getLimitedAvailabilityUrl=function(e){var b={};b[a.URL_PARAM_ID__BUYING_IN_BULK_QUANTITY]=e;b[a.URL_PARAM_ID__BUYING_IN_BULK_ASIN]=g.getPageState().asin;b[a.URL_PARAM_ID__BUYING_IN_BULK_REFTAG]=a.URL_PARAM_VALUE__LIMITED_AVAILABILITY_REFTAG;return"/ab/bulk-order/bebx/api/v2/fastForwardBasket"+r("?",b)};b.prototype.notifyQuantityUnavailableOptionClicked=function(e){e=f.location.protocol+"//"+f.location.host+this.getLimitedAvailabilityUrl(e);f.location.href=e};return{EVENT__BUY_BOX_QUANTITY_CHANGED:"buyBoxQuantityChanged",
EVENT__QUANTITY_REFRESH_CHECK_STARTED:"quantityRefreshCheckStarted",EVENT__QUANTITY_REFRESH_CHECK_FINISHED:"quantityRefreshCheckFinished",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_STARTED:"fetchQuantityDiscountTableStarted",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_COMPLETED:"fetchQuantityDiscountTableCompleted",EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_ERROR:"fetchQuantityDiscountTableError",EVENT__NOTIFY_BUYING_IN_BULK_OPTION_CLICKED:"notifyBuyingInBulkOptionClicked",getUrlParameter:k,replaceUrlParameter:l,replaceUrlQueryParameters:function(e,
a){var b="?";e=e.split(b);2===e.length&&(b+=e[1]);a=r(b,a);"?"!==a&&(e[0]+=a);return e[0]},singleton:new b}});"use strict";n.when("A","jQuery","abPricingFfqp_constants","abPricingFfqp_metrics","abPricingFfqp_amazonAPIClient","abPricingFfqp_helpers","ready").register("abPricingFfqp_quantityPickerDataManager",function(d,f,g,a,c,h){var k=d.createClass({_buyboxIdToBOTypes:{customOffer:["CUSTOM_OFFER"],b2bRd:["B2B_RD"],default:["NEW","B2B_NEW"]},_buyboxIdToFallbackBOTypes:{customOffer:["NEW","B2B_NEW"]},
init:function(a){this._aapiClient=new c(a);this._qptCache=this._getQPTCacheInstance();this._quantityDataCache=this._getQuantityDataCacheInstance()},getQuantityPricingTable:function(c){a.registerWidgetBodyBegin(g.METRIC_SCOPE_NAME.GET_QPT_REQUEST);var b=this;this._qptCache.get(c,function(e){try{var d,f=b._extractQPT(e,c),h=b._extractPricingTiers(f);if(b._hasNextPage(f)){a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGINATES);a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_FETCH_PAGE);var k=b._extractNextPage(f);
b._aapiQPTRequest(c.asin,k,[h],c.success,c.error)}else d=b._convertToLegacyFormat(h),c.success(d)}catch(m){a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_EXTRACTION_FAILED),c.error(m)}},c.error)},refreshCheck:function(a){function b(e){g||(g=!0,a.error(e))}var e=this,c={},g=!1;f.each([a.quantity,a.initialQuantity],function(g,d){e._getSingleQuantityData({asin:a.asin,merchantId:a.merchantId,quantity:d,currentBuyBoxId:a.currentBuyBoxId,success:function(e){c[d]=e;if(c[a.initialQuantity]&&c[a.quantity]){e=
c[a.initialQuantity];var b=c[a.quantity];a.success(b.isAvailable,e.price!==b.price||e.buyingOptionId!==b.buyingOptionId)}},error:b})})},_aapiRequest:function(c,b,e,g,d,f){a.registerWidgetBodyBegin(f);this._aapiClient.productV2({asin:c,subresources:b,parameters:e,success:function(e){a.registerWidgetCriticalFeature(f);a.registerWidgetLoaded(f);g(e)},error:function(e,b){a.registerWidgetLoaded(f);d(e,b)}})},_triggerQPTWeblabsIfAllowlisted:function(c){if(c.metadata&&c.metadata[g.AAPI_METADATA_EXPERIMENTS])try{c.metadata[g.AAPI_METADATA_EXPERIMENTS].split(",").forEach(function(b){b=
b.split(":",2);a.triggerWeblabIfAllowlisted(b[0],b[1])})}catch(b){a.logError("ERROR","Could not trigger weblabs",b),a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_WEBLABS_TRIGGERING_EXCEPTION)}},_aapiQPTRequest:function(c,b,e,d,f){var h=this;this._aapiClient.productQPT({asin:c,url:b,success:function(b){try{var k=h._processQPTPage(b);e.push(h._extractPricingTiers(k));a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGE_FETCHED);h._maxPaginationDepthGuardrail(e.length);if(h._hasNextPage(k)){a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_FETCH_PAGE);
var m=h._extractNextPage(k);h._aapiQPTRequest(c,m,e,d,f)}else{var l=h._constructTiers(e),r=h._convertToLegacyFormat(l);a.registerWidgetCriticalFeature(g.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerWidgetLoaded(g.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGINATION_COMPLETE);d(r)}}catch(n){a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGINATION_PAGE_ERROR),a.logError("ERROR","Exception when processing next page",n),f(n)}},error:function(b,c,p){if(404===p){a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGINATION_404_ERROR);
try{var k=h._constructTiers(e),m=h._convertToLegacyFormat(k);a.registerWidgetCriticalFeature(g.METRIC_SCOPE_NAME.GET_QPT_REQUEST);a.registerWidgetLoaded(g.METRIC_SCOPE_NAME.GET_QPT_REQUEST);d(m)}catch(l){a.registerWidgetLoaded(g.METRIC_SCOPE_NAME.GET_QPT_REQUEST),a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGINATION_404_EXCEPTION),a.logError("ERROR","Exception when processing empty page",l),f(l)}}else a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGINATION_ERROR),f(b,c)}})},_maxPaginationDepthGuardrail:function(c){if(c>=
this.getMaxPaginationDepth())throw a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_MAX_PAGINATION_DEPTH_REACHED),Error("Max pagination depth reached");},getMaxPaginationDepth:function(){return g.MAX_PAGINATION_DEPTH},_getQPTCacheInstance:function(){var a=this,b=[a._aapiClient.inclusions().quantityPricingTableV1];return new h.AsyncCache({loader:function(e,c,d){var f={};"string"===typeof e.merchantId&&(f.merchantId=e.merchantId);f.enableQuantityPricingTablePagination=e.enableQPTPagination;a._aapiRequest(e.asin,
b,f,c,d,g.METRIC_SCOPE_NAME.AAPI_QPT)},keyGenerator:function(e){var a=e.asin;"string"===typeof e.merchantId&&(a+=e.merchantId);return a}})},_getQuantityDataCacheInstance:function(){var a=this,b=[a._aapiClient.inclusions().priceV1,a._aapiClient.inclusions().availabilityV2];return new h.AsyncCache({loader:function(e,c,d){var f={itemQuantity:e.quantity};"string"===typeof e.merchantId&&(f.merchantId=e.merchantId);a._aapiRequest(e.asin,b,f,c,d,g.METRIC_SCOPE_NAME.AAPI_SINGLE_QUANTITY)},keyGenerator:function(a){var b=
a.asin+a.quantity.toString();"string"===typeof a.merchantId&&(b+=a.merchantId);return b}})},_firstBuyingOption:function(a){return a.entity.buyingOptions[0]},_firstBuyingOptionByType:function(a,b){a=a.entity.buyingOptions;for(var e=0;e<a.length;e++){var c=a[e];if(-1!==b.indexOf(c.type))return c}},_firstBuyingOptionByBuyboxId:function(a,b){a=this._firstBuyingOptionByType(a,this._buyboxIdToBOTypes[b]||this._buyboxIdToBOTypes.default);if("undefined"===typeof a)throw Error("Could not find an eligible buying option");
return a},_firstBuyingOptionByBuyboxIdWithFallback:function(a,b){var e=this._buyboxIdToFallbackBOTypes[b];b=this._firstBuyingOptionByType(a,this._buyboxIdToBOTypes[b]||this._buyboxIdToBOTypes.default);"undefined"===typeof b&&"undefined"!==typeof e&&(b=this._firstBuyingOptionByType(a,e));if("undefined"===typeof b)throw Error("Could not find an eligible or fallback buying option");return b},_extractQPT:function(c,b){var e;try{e=this._firstBuyingOptionByBuyboxId(c,b.currentBuyBoxId)}catch(d){a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_BO_NOT_FOUND);
a.logError("ERROR","Exception when getting first BO",d);return}c=e.quantityPricingTable;if("undefined"===typeof c||"undefined"===typeof c.entity)a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_MISSING),"string"===typeof e.type&&a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_MISSING_BO.replace(g.AAPI_BO_PLACEHOLDER,e.type));else return this._triggerQPTWeblabsIfAllowlisted(c),c},_processQPTPage:function(c){if("undefined"===c.entity)a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PAGE_MISSING);else return c},_extractPricingTiers:function(c){if("undefined"===
typeof c)return[];var b=c.entity.pricingTiers;if("undefined"===typeof b)throw a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_ERROR),c=c.entity.code,"string"===typeof c&&a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_ERROR_CODE.replace(g.AAPI_ERROR_CODE_PLACEHOLDER,c)),Error("Error in the QPT sub-resource");a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_PRESENT);return b},_hasNextPage:function(a){return"undefined"!==typeof a&&"undefined"!==typeof a.entity.nextPage},_extractNextPage:function(a){return a.entity.nextPage.resource.url},
_constructTiers:function(a){for(var b=0,e=[],c=0;c<a.length;c++)for(var g=0;g<a[c].length;g++){var d=a[c][g],f=d.minimumQuantity;f!=b&&(b=f,e.push(d))}return e},_convertToLegacyFormat:function(c){var b=[];try{for(var e=0;e<c.length;e++){var d=c[e],f={quantity:d.minimumQuantity,quantityPickerPriceText:h.richContentHelper.toText(d.priceMessage),isUncompetitive:d.hidden,isLowestAvailablePrice:d.lowestAvailablePrice};d.savingsMessage&&(f.savingsMessage=h.richContentHelper.toText(d.savingsMessage));d.availabilityMessage&&
(f.availabilityMessage=h.richContentHelper.toText(d.availabilityMessage));d.program&&(f.program=d.program);d.buyingInBulk&&"undefined"!==typeof d.buyingInBulk.fragments&&1<=d.buyingInBulk.fragments.length&&(f.buyingInBulkLink=h.richContentHelper.toText(d.buyingInBulk.fragments[0]),f.buyingInBulkMessage=h.richContentHelper.toText({fragments:d.buyingInBulk.fragments.slice(1)}));b.push(f)}}catch(k){throw a.registerCounter(g.COUNTER_METRIC.AAPI_QPT_CONVERSION_ERROR),k;}return b},_extractSingleQuantityData:function(c,
b){var e={isAvailable:!1,buyingOptionId:"",price:""},d;try{d=this._firstBuyingOptionByBuyboxIdWithFallback(c,b)}catch(f){return a.registerCounter(g.COUNTER_METRIC.AAPI_SINGLE_QUANTITY_BO_NOT_FOUND),e}try{return{isAvailable:"OUT_OF_STOCK"!==d.availability.entity.type,buyingOptionId:d.availability.resource.url,price:d.price.entity.priceToPay.moneyValueOrRange.value.displayString}}catch(f){return a.registerCounter(g.COUNTER_METRIC.AAPI_SINGLE_QUANTITY_EXTRACTION_FAILED),e}},_getSingleQuantityData:function(a){var b=
this;b._quantityDataCache.get({asin:a.asin,merchantId:a.merchantId,quantity:a.quantity},function(e){a.success(b._extractSingleQuantityData(e,a.currentBuyBoxId))},a.error)}}),l=d.createClass({init:function(a){this._errorMessage=a},getQuantityPricingTable:function(a){a.error&&a.error(this._errorMessage)},refreshCheck:function(a){a.error&&a.error(this._errorMessage)}}),r;return{getInstance:function(){if("undefined"!==typeof r)return r;var c=d.state(g.AJAX_PARAMS_STATE_KEY);"undefined"===typeof c&&(a.registerWidgetBodyBegin(g.METRIC_SCOPE_NAME.AUI_STATE_PARSING),
d.state.parse(),a.registerWidgetLoaded(g.METRIC_SCOPE_NAME.AUI_STATE_PARSING),c=d.state(g.AJAX_PARAMS_STATE_KEY));if("undefined"!==typeof c){c.priceFormatConfig=c;c.clientId="dpx";try{r=new k(c)}catch(b){a.registerCounter(g.COUNTER_METRIC.AAPI_DATA_MGR_INIT_FAILED),r=new l(g.ERROR.AAPI_DATA_MGR_INIT_FAILED)}}else return a.registerCounter(g.COUNTER_METRIC.MISSING_AJAX_PARAMS),new l(g.ERROR.MISSING_AJAX_PARAMS);return r}}});"use strict";n.when("A").register("abPricingFfqp_helpers",function(d){var f=
d.createClass({_listeners:{},addListeners:function(d,a,c){this._listeners.hasOwnProperty(d)||(this._listeners[d]=[]);this._listeners[d].push({success:a,error:c})},triggerSuccess:function(d,a){this._triggerListeners(d,"success",a)},triggerError:function(d,a){this._triggerListeners(d,"error",a)},_triggerListeners:function(d,a,c){if(this._listeners.hasOwnProperty(d))for(d=this._listeners[d];0<d.length;){var f=d.pop();if(f[a])f[a](c)}}});return{AsyncCache:d.createClass({_requestStatus:{IN_PROGRESS:1,
READY:2,ERROR:3},_status:{},_cache:{},init:function(d){this._eventHandler=new f;this._loader=d.loader;this._keyGenerator=d.keyGenerator},_getKey:function(d){return this._keyGenerator?this._keyGenerator(d):d},get:function(d,a,c){var f=this._getKey(d);this._status[f]===this._requestStatus.READY?a(this._cache[f]):(this._eventHandler.addListeners(f,a,c),this._load(d,f))},_load:function(d,a){var c=this;c._status[a]!==c._requestStatus.IN_PROGRESS&&(c._status[a]=c._requestStatus.IN_PROGRESS,c._loader(d,
function(d){c._cache[a]=d;c._status[a]=c._requestStatus.READY;c._eventHandler.triggerSuccess(a,d)},function(d){c._status[a]=c._requestStatus.ERROR;c._eventHandler.triggerError(a,d)}))}}),richContentHelper:{toText:function a(c){if(c.money)return c.money.displayString;if(c.text)return c.text;if(c.link)return a(c.link.content);if(c.fragments){for(var d=[],f=0;f<c.fragments.length;f++)d.push(a(c.fragments[f]));return d.join("")}return c.semanticContent?a(c.semanticContent.content):""}}}});"use strict";
n.when("jQuery","A","a-dropdown","a-button","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics","abPricingFfqp_constants").register("abPricingFfqp_quantityPickerLogic",function(d,f,g,a,c,h,k,l){function n(a){return a.prop("selectedIndex")+1===a.prop("length")}function p(a,b){if(!c.dropdownContainsQuantity(a,b)){var d=document.createElement("option");d.value=b;d.text=b.toString();a.append(d)}}function b(a){this.id=a.id;this.buyBoxId=a.buyBoxId;this.buyingOptionStereotype=
a.buyingOptionStereotype?a.buyingOptionStereotype:"";this.quantityHiddenFieldSelector=a.quantityHiddenFieldSelector;this.leastMinimumOrderQuantity=a.leastMinimumOrderQuantity;this.predefinedQuantitiesDropdownSelector=a.predefinedQuantitiesDropdownSelector;this.predefinedQuantitiesDropdownContainerSelector=a.predefinedQuantitiesDropdownContainerSelector;this.freeQuantityTextInputSelector=a.freeQuantityTextInputSelector;this.freeQuantityTextInputOuterSelector=a.freeQuantityTextInputOuterSelector;this.updateButtonSelector=
a.updateButtonSelector;this.addToCartButtonSelector=a.addToCartButtonSelector;this.initialQuantity=a.initialQuantity;this.buyingOptionPosition=a.buyingOptionPosition;this.limitedAvailabilityMessageSelector=a.limitedAvailabilityMessageSelector;this.splitOfferLinkSelector=a.splitOfferLinkSelector;this.splitOfferSectionSelector=a.splitOfferSectionSelector;this.amazonDevicesLinkEnabled=a.amazonDevicesLinkEnabled;this.buyingInBulkBaseUrl=a.buyingInBulkBaseUrl;this.initialQuantity&&this.updateQuantityHiddenField(this.initialQuantity);
this.wireUpSelectorBasedEvents()}b.prototype.wireUpSelectorBasedEvents=function(){var a=this,b=d(this.predefinedQuantitiesDropdownSelector);f.on("a:dropdown:"+b[0].id+":select",function(b){a.handleDropdownOptionClicked(b.value)});f.on(h.EVENT__BUY_BOX_QUANTITY_CHANGED,function(b,c,d){a.handleQuantityChangedOnOtherBuyBox(b,c,d)});f.on(h.EVENT__QUANTITY_REFRESH_CHECK_STARTED,function(){a.handleQuantityRefreshCheckStarted()});f.on(h.EVENT__QUANTITY_REFRESH_CHECK_FINISHED,function(){a.handleQuantityRefreshCheckFinished()})};
b.prototype.wireUpReferenceBasedEvents=function(){var a=this,b=d(this.freeQuantityTextInputSelector),c=d(this.updateButtonSelector);b.keydown(function(b){a.handleTextInputKeyDown(b)});b.keyup(function(b){a.handleTextInputKeyUp(b)});b.focus(function(){a.handleTextInputFocused()});c.click(function(){a.handleButtonClick()})};b.prototype.attachToDOM=function(){this.wireUpReferenceBasedEvents();n(d(this.predefinedQuantitiesDropdownSelector))?this.switchToFreeQuantityUI():this.switchToPredefinedQuantitiesUI();
this.enableUI();this.lastSelectedQuantity=this.getCurrentQuantity();h.singleton.leastMinimumOrderQuantity=this.leastMinimumOrderQuantity};b.prototype.getCurrentQuantity=function(){if(this.isTextInputVisible()){var a=d(this.freeQuantityTextInputSelector);return parseInt(a.val())}return this.isDropdownVisible()?(a=d(this.predefinedQuantitiesDropdownSelector),parseInt(a.find(":selected").val())):q};b.prototype.handleQuantityRefreshCheckStarted=function(){this.doesDOMExist()&&this.disableUI()};b.prototype.handleQuantityRefreshCheckFinished=
function(){this.doesDOMExist()&&this.enableUI()};b.prototype.handleDropdownOptionClicked=function(a){var b=d(this.predefinedQuantitiesDropdownSelector);n(b)?(a=d(this.freeQuantityTextInputSelector),a.val(this.lastSelectedQuantity.toString()),this.switchToFreeQuantityUI(),a.focus(),c.incrementMetricByOne("freeFormQtyPickerMaxQtySelected")):(this.lastSelectedQuantity=a=parseInt(a),this.updateQuantityHiddenField(a),h.singleton.notifyQuantityChanged(a,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype}))};
b.prototype.handleTextInputFocused=function(){d(this.freeQuantityTextInputSelector).select()};b.prototype.handleTextInputKeyUp=function(b){13!==b.keyCode&&a(this.updateButtonSelector).show()};b.prototype.handleTextInputKeyDown=function(a){13===a.keyCode&&(a.preventDefault(),d(this.updateButtonSelector).click(),this._findWithinPickerAccordionRow(this.addToCartButtonSelector).focus())};b.prototype.clampQuantity=function(a){999<a&&(a=999);this.leastMinimumOrderQuantity!==q&&a<this.leastMinimumOrderQuantity&&
(a=this.leastMinimumOrderQuantity);return a};b.prototype.handleButtonClick=function(){var b=d(this.predefinedQuantitiesDropdownSelector),f=g.getSelect(b[0]),k=d(this.freeQuantityTextInputSelector),m=k.val(),l=parseInt,n=m.match(/[1-9][0-9]*/),l=l(null===n?"1":n[0]),l=this.clampQuantity(l);c.dropdownContainsQuantity(b,l)?(this.switchToPredefinedQuantitiesUI(),f.setValue(l.toString()),this.handleDropdownOptionClicked(l)):(b=l.toString(),b!==m&&k.val(b),a(this.updateButtonSelector).hide(),this.updateQuantityHiddenField(l),
h.singleton.notifyQuantityChanged(l,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype}))};b.prototype.doesDOMExist=function(){return 0<d(this.predefinedQuantitiesDropdownSelector).length&&0<d(this.freeQuantityTextInputSelector).length&&0<d(this.updateButtonSelector).length};b.prototype.handleQuantityChangedOnOtherBuyBox=function(a,b,c){if(this.doesDOMExist()){a!==this.id&&this.getCurrentQuantity()!==b&&this._updateSelectedQuantity(b);var d=this;h.singleton.buyboxRefreshCheck({newQuantity:b,
activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption,currentBuyBoxId:this.buyBoxId,callback:function(a){d.updateLimitedAvailabilityMessageVisibility(a.hasAvailability)}})}};b.prototype._updateSelectedQuantity=function(a){var b=d(this.predefinedQuantitiesDropdownSelector),f=g.getSelect(b[0]);c.dropdownContainsQuantity(b,a)?(f.setValue(a.toString()),this.lastSelectedQuantity=a,this.switchToPredefinedQuantitiesUI()):(d(this.freeQuantityTextInputSelector).val(a.toString()),this.switchToFreeQuantityUI());
this.updateQuantityHiddenField(a)};b.prototype.showDropdown=function(){d(this.predefinedQuantitiesDropdownContainerSelector).removeClass("aok-hidden")};b.prototype.hideDropdown=function(){d(this.predefinedQuantitiesDropdownContainerSelector).addClass("aok-hidden")};b.prototype.isDropdownVisible=function(){return!d(this.predefinedQuantitiesDropdownContainerSelector).hasClass("aok-hidden")};b.prototype.showTextInput=function(){"mobile"===c.getPageState().platform?d(this.freeQuantityTextInputOuterSelector).removeClass("aok-hidden"):
d(this.freeQuantityTextInputSelector).removeClass("aok-hidden")};b.prototype.hideTextInput=function(){"mobile"===c.getPageState().platform?d(this.freeQuantityTextInputOuterSelector).addClass("aok-hidden"):d(this.freeQuantityTextInputSelector).addClass("aok-hidden")};b.prototype.isTextInputVisible=function(){return"mobile"===c.getPageState().platform?!d(this.freeQuantityTextInputOuterSelector).hasClass("aok-hidden"):!d(this.freeQuantityTextInputSelector).hasClass("aok-hidden")};b.prototype.disableTextInput=
function(){if("mobile"===c.getPageState().platform){var a=d(this.freeQuantityTextInputSelector),b=d(this.freeQuantityTextInputOuterSelector);a.prop("disabled","disabled");b.addClass("a-form-disabled")}else a=d(this.freeQuantityTextInputSelector),a.prop("disabled","disabled"),a.addClass("a-form-disabled")};b.prototype.enableTextInput=function(){if("mobile"===c.getPageState().platform){var a=d(this.freeQuantityTextInputSelector),b=d(this.freeQuantityTextInputOuterSelector);a.removeProp("disabled");
b.removeClass("a-form-disabled")}else a=d(this.freeQuantityTextInputSelector),a.removeProp("disabled"),a.removeClass("a-form-disabled")};b.prototype.switchToFreeQuantityUI=function(){this.hideDropdown();this.showTextInput();a(this.updateButtonSelector).hide()};b.prototype.switchToPredefinedQuantitiesUI=function(){this.showDropdown();this.hideTextInput();a(this.updateButtonSelector).hide()};b.prototype.disableUI=function(){var b=g.getSelect(this.predefinedQuantitiesDropdownSelector),c=a(this.updateButtonSelector);
b.update({status:"disabled"});this.disableTextInput();c.disable()};b.prototype.enableUI=function(){var b=g.getSelect(this.predefinedQuantitiesDropdownSelector),c=a(this.updateButtonSelector);b.update({status:"normal"});this.enableTextInput();c.enable()};b.prototype._isMobileQuantityHiddenFieldSelector=function(){return"string"===typeof this.quantityHiddenFieldSelector&&-1<this.quantityHiddenFieldSelector.indexOf("select#mobileQuantityDropDown")};b.prototype._mobileQuantityHiddenFieldSelector=function(){return this.quantityHiddenFieldSelector.replace("input#quantity",
"select#mobileQuantityDropDown")};b.prototype.updateQuantityHiddenField=function(a){var b=this._findWithinPickerAccordionRow(this.quantityHiddenFieldSelector).first();b.is("select")?(p(b,a),g.getSelect(b).val(a)):b.val(a.toString());f.trigger(l.ADD_TO_CART_QUANTITY_CHANGE_EVENT,{nativeItemNode:b[0],value:a.toString()});"mobile"!==c.getPageState().platform||this._isMobileQuantityHiddenFieldSelector()||(b=this._findWithinPickerAccordionRow(this._mobileQuantityHiddenFieldSelector()))&&b.is("select")&&
(p(b,a),g.getSelect(b).val(a),b.val(a.toString()))};b.prototype.updateLimitedAvailabilityMessageVisibility=function(b){var c=this._findWithinPickerAccordionRow(this.addToCartButtonSelector).closest(".a-button"),f=a(c),c=this._findWithinPickerAccordionRow(this.splitOfferSectionSelector);b?(d(this.limitedAvailabilityMessageSelector).addClass("aok-hidden"),f.enable(),c.addClass("aok-hidden")):(d(this.limitedAvailabilityMessageSelector).removeClass("aok-hidden"),f.disable(),b=this.getCurrentQuantity(),
f=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:h.singleton.getLimitedAvailabilityUrl(b),this._findWithinPickerAccordionRow(this.splitOfferLinkSelector).attr("href",f),1<b?(k.registerCounter(l.COUNTER_METRIC.SPLIT_OFFER_LINK_DISPLAYED),c.removeClass("aok-hidden")):c.addClass("aok-hidden"))};b.prototype._findWithinPickerAccordionRow=function(a){return c.findWithinPickerAccordionRow(this.id,a)};return{QuantityPickerLogic:b}});"use strict";n.when("jQuery","A","a-dropdown","a-modal","a-button",
"abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics","abPricingFfqp_constants").register("abPricingFfqpV2_quantityPickerLogic",function(d,m,g,a,c,h,k,l,n){function p(a,b){if(!h.dropdownContainsQuantity(a,b)){var c=document.createElement("option");c.value=b;c.text=b.toString();a.append(c)}}function b(a){this.id=a.id;this.buyBoxId=a.buyBoxId;this.buyingOptionStereotype=a.buyingOptionStereotype?a.buyingOptionStereotype:"";this.quantityHiddenFieldSelector=a.quantityHiddenFieldSelector;
this.leastMinimumOrderQuantity=a.leastMinimumOrderQuantity;this.quantityPickerSelector=a.quantityPickerSelector;this.quantityDiscountTableSelector=this.quantityPickerSelector+" .quantity-discount-table";this.quantityTextInputLabelSelector=this.quantityPickerSelector+" .quantity-text-input-label";this.buyboxAccordionContainerSelector=a.buyboxAccordionContainerSelector;this.loadMoreMessage=a.loadMoreMessage;this.fetchTheBestPricesMessage=a.fetchTheBestPricesMessage;this.qdtErrorMessage=a.qdtErrorMessage;
this.includeRfqdLinkInNewPicker=a.includeRfqdLinkInNewPicker;this.requestForQuantityDiscountModalSelector=a.requestForQuantityDiscountModalSelector;this.requestForQuantityDiscountMessage=a.requestForQuantityDiscountMessage;this.bbtLinkSelector=a.bbtLinkSelector;this.addToCartButtonSelector=a.addToCartButtonSelector;this.limitedAvailabilityMessageSelector=a.limitedAvailabilityMessageSelector;this.fetchQuantityDiscountTableCompleted=this.fetchQuantityDiscountTableStarted=this.isLoadMoreButtonClicked=
!1;this.quantityTextInputSelector=this.quantityPickerSelector;this.quantityTextInputSelector+=" .quantity-text-input-with-label";this.loadMoreButtonForUncompetitiveTiersPresence=this.hasError=!1;this.quantityPricingTableSummaryEnabled=a.quantityPricingTableSummaryEnabled;this.qdsForLockedMerchantEnabled=a.qdsForLockedMerchantEnabled;this.isAODLinkEnabled=!0===a.isAODLinkEnabled;this.quantityPickerUnavailabilityMessage=a.quantityPickerUnavailabilityMessage;this.quantityPickerUnavailabilityLink=a.quantityPickerUnavailabilityLink;
this.splitOfferLinkSelector=a.splitOfferLinkSelector;this.splitOfferSectionSelector=a.splitOfferSectionSelector;this.amazonDevicesLinkEnabled=a.amazonDevicesLinkEnabled;this.buyingInBulkBaseUrl=a.buyingInBulkBaseUrl;this.initializeQuantityAvailabilityVariables();this.wireUpSelectorBasedEvents();this.initializeQuantityHiddenField()}var e=h.PACKAGE_PREFIX+".PriceTableLoadError",t=h.PACKAGE_PREFIX+".QuantityPriceTableRender",u=h.PACKAGE_PREFIX+".QuantityPriceTableView",v=h.PACKAGE_PREFIX+".QuantityPriceTableRenderWithLockedMerchant",
w=h.PACKAGE_PREFIX+".QuantityPriceTableViewWithLockedMerchant",x=h.PACKAGE_PREFIX+".QuantityPriceTableRenderWithUncompetitiveTiers",y=h.PACKAGE_PREFIX+".QuantityPriceTableViewWithUncompetitiveTiers",z=h.PACKAGE_PREFIX+".QuantityPriceTableLoadMoreButtonClicked",A=h.PACKAGE_PREFIX+".QuantityPriceTableLoadMoreButtonClickedWithUncompetitiveTiers",B=h.PACKAGE_PREFIX+".QuantityPriceTableBBTLinkRender",C=h.PACKAGE_PREFIX+".QuantityPriceTableBBTLinkClick",D=h.PACKAGE_PREFIX+".QuantityPriceTableQuantityUnavailableLinkRender",
E=h.PACKAGE_PREFIX+".QuantityPriceTableQuantityUnavailableLinkClick",F=h.PACKAGE_PREFIX+".QuantityPriceTableRFQDBBTLinkClick",G=h.PACKAGE_PREFIX+".QuantityPriceTableAvailabilityMessageRender",H=h.PACKAGE_PREFIX+".QuantityPriceTableAvailabilityMessageView";b.prototype.initializeQuantityAvailabilityVariables=function(){this.hasAvailability=!0};b.prototype.wireUpSelectorBasedEvents=function(){var a=this;m.on(k.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_STARTED,function(b){b&&b!==a.id||a.handleFetchQuantityDiscountTableStarted()});
m.on(k.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_COMPLETED,function(b,c){c&&c!==a.id||a.handleFetchQuantityDiscountTableCompleted(b)});m.on(k.EVENT__FETCH_QUANTITY_DISCOUNT_TABLE_ERROR,function(b){b&&b!==a.id||a.handleFetchQuantityDiscountTableError()});m.on(k.EVENT__BUY_BOX_QUANTITY_CHANGED,function(b,c,d){a.handleQuantityChangedOnOtherBuyBox(b,c,d)});m.on(k.EVENT__QUANTITY_REFRESH_CHECK_STARTED,function(){a.handleQuantityRefreshCheckStarted()});m.on(k.EVENT__QUANTITY_REFRESH_CHECK_FINISHED,function(){a.handleQuantityRefreshCheckFinished()})};
b.prototype.initializeQuantityHiddenField=function(){var a=k.singleton.currentQuantity,b=parseInt(this.leastMinimumOrderQuantity);b&&b>a&&(a=b);this.updateQuantityHiddenField(a)};b.prototype.handleFetchQuantityDiscountTableCompleted=function(a){this.wireUpQuantityDiscountTableData(a);this.generateQuantityDiscountTable();this.fetchQuantityDiscountTableCompleted=!0};b.prototype.handleFetchQuantityDiscountTableStarted=function(){this.fetchQuantityDiscountTableStarted=!0};b.prototype.wireUpQuantityDiscountTableData=
function(a){this.priceTiers=a;this.buildQptRenderMetrics();this.buildQptForLockedMerchantMetrics(v);this.buildQptUncompetitiveTiersMetrics(x);this.buildAvailabilityMessageMetrics(G)};b.prototype.handleFetchQuantityDiscountTableError=function(){h.incrementMetricByOne(e);this.fetchQuantityDiscountTableStarted=!1;this.hasError=!0;this.generateQuantityDiscountTable()};b.prototype.wireUpReferenceBasedEvents=function(){var a=this,b=d(this.quantityTextInputSelector),c=d(this.quantityTextInputLabelSelector);
c.click(function(){b.focus();b.click()});b.focus(function(){c.hide();"1"===this.value&&(this.value="");a.showQuantityDiscountTable()});b.blur(function(){""===this.value&&(this.value=k.singleton.currentQuantity);a.updateQuantityAndHideQuantityDiscountTable();c.show()});b.live("keypress input",function(b){a.isValidQuantityTextInputKeyCode(b);this.value=this.value.replace(/[^0-9]/g,"")});b.live("input",m.throttle(function(b){a.quantityAvailabilityCheckStart()},500));b.live("keydown",function(b){a.isValidQuantityTextPressKeyCode(b)});
b.live("click change paste keyup",function(){a.clampQuantity(b.val());a.generateQuantityDiscountTable()})};b.prototype.quantityAvailabilityCheckStart=function(){this.initializeQuantityAvailabilityVariables();var a=this.getCurrentQuantity(),b=this;k.singleton.notifyQuantityTyped(a,{currentBuyBoxId:this.buyBoxId,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled,callback:function(c){a===b.getCurrentQuantity()&&b.updateLimitedAvailabilityMessageVisibility(c.hasAvailability)}})};
b.prototype.attachToDOM=function(){this.wireUpReferenceBasedEvents();this.enableUI();k.singleton.leastMinimumOrderQuantity=this.leastMinimumOrderQuantity};b.prototype.isValidQuantityTextPressKeyCode=function(a){var b={left:37,up:38,right:39,down:40},c=f.event?a.keyCode:a.which,d;for(d in b)b[d]===c&&a.preventDefault()};b.prototype.isValidQuantityTextInputKeyCode=function(a){var b=f.event?a.keyCode:a.which;8!==b&&46!==b&&(13===b?(this.updateQuantityAndHideQuantityDiscountTable(),a.preventDefault()):
(b=String.fromCharCode(b),/\d/.test(b)||a.preventDefault()))};b.prototype.getCurrentQuantity=function(){var a=d(this.quantityTextInputSelector);return this.clampQuantity(a.val())};b.prototype.handleQuantityRefreshCheckStarted=function(){this.doesDOMExist()&&this.disableUI()};b.prototype.handleQuantityRefreshCheckFinished=function(){this.doesDOMExist()&&this.enableUI()};b.prototype.clampQuantity=function(a){var b=a;999<a&&(b=999);this.leastMinimumOrderQuantity!==q&&a<this.leastMinimumOrderQuantity&&
(b=this.leastMinimumOrderQuantity);return b};b.prototype.doesDOMExist=function(){return 0<d(this.quantityTextInputSelector).length};b.prototype.handleQuantityChangedOnOtherBuyBox=function(a,b,c){if(this.doesDOMExist()){a!==this.id&&parseInt(this.getCurrentQuantity())!==b&&(d(this.quantityTextInputSelector).val(b),this.updateQuantityHiddenField(b));var e=this;k.singleton.buyboxRefreshCheck({newQuantity:b,activeBuyBoxId:c.activeBuyBoxId,selectedBuyingOption:c.selectedBuyingOption,currentBuyBoxId:this.buyBoxId,
qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled,callback:function(a){e.updateLimitedAvailabilityMessageVisibility(a.hasAvailability)}})}};b.prototype.showQuantityDiscountTable=function(){this.buildQptViewMetrics();this.fetchQuantityDiscountTableCompleted&&(this.buildQptForLockedMerchantMetrics(w),this.buildQptUncompetitiveTiersMetrics(y,this.getStartIndexOfQuantityDiscountTierTable(),3),this.buildAvailabilityMessageMetrics(H));var a=h.findAccordionRow(this.id);0<a.length&&(a.get(0).setAttribute("style",
"overflow:visible"),a=a.find(".a-accordion-inner.accordion-row-content"),0<a.length&&a.get(0).setAttribute("style","overflow:visible"));a=d(this.buyboxAccordionContainerSelector);0<a.length&&(a.get(0).setAttribute("style","overflow:visible"),a=a.find(".a-accordion-inner"),0<a.length&&a.get(0).setAttribute("style","overflow:visible"));d(this.quantityPickerSelector).addClass("open")};b.prototype.hideQuantityDiscountTable=function(){d(this.quantityPickerSelector).removeClass("open")};b.prototype.updateQuantityAndHideQuantityDiscountTable=
function(){var a=d(this.quantityDiscountTableSelector),b=d(this.quantityTextInputSelector),c=this.clampQuantity(b.val());b.val(c);this.updateQuantityHiddenField(c);k.singleton.notifyQuantityChanged(c,{senderId:this.id,activeBuyBoxId:this.buyBoxId,selectedBuyingOption:this.buyingOptionStereotype,qdsForLockedMerchantEnabled:this.qdsForLockedMerchantEnabled});this.isLoadMoreButtonClicked=!1;this.hideQuantityDiscountTable();a.empty()};b.prototype.disableUI=function(){var a=d(this.quantityTextInputSelector),
b=d(this.quantityDiscountTableSelector);a.attr("disabled",!0);a.addClass("quantity-text-input-disabled");b.attr("disabled",!0)};b.prototype.enableUI=function(){var a=d(this.quantityTextInputSelector),b=d(this.quantityDiscountTableSelector);a.attr("disabled",!1);a.removeClass("quantity-text-input-disabled");b.attr("disabled",!1);this.hideQuantityDiscountTable()};b.prototype._isMobileQuantityHiddenFieldSelector=function(){return"string"===typeof this.quantityHiddenFieldSelector&&-1<this.quantityHiddenFieldSelector.indexOf("select#mobileQuantityDropDown")};
b.prototype._mobileQuantityHiddenFieldSelector=function(){return this.quantityHiddenFieldSelector.replace("input#quantity","select#mobileQuantityDropDown")};b.prototype.updateQuantityHiddenField=function(a){var b=this._findWithinPickerAccordionRow(this.quantityHiddenFieldSelector).first();b.is("select")&&(p(b,a),g.getSelect(b).val(a));b.val(a.toString());m.trigger(n.ADD_TO_CART_QUANTITY_CHANGE_EVENT,{nativeItemNode:b[0],value:a.toString()});"mobile"!==h.getPageState().platform||this._isMobileQuantityHiddenFieldSelector()||
(b=this._findWithinPickerAccordionRow(this._mobileQuantityHiddenFieldSelector()))&&b.is("select")&&(p(b,a),g.getSelect(b).val(a),b.val(a.toString()))};b.prototype.generateVisibleTiersList=function(a,b){for(var c=[],d=0,e=!1;b<this.priceTiers.length&&(this.isLoadMoreButtonClicked||3>d);){var f=this.priceTiers[b],g=!this.shouldHideFirstTier()&&0===d,h=f.isLowestAvailablePrice||e||2!=d;if(this.isLoadMoreButtonClicked||g||!f.isUncompetitive&&h)c.push({quantity:Math.max(a,f.quantity),savingsMessage:f.savingsMessage,
availabilityMessage:f.availabilityMessage,quantityPickerPriceText:f.quantityPickerPriceText,isDiscountUnlocked:0===d?0===b&&"BUSINESS_VOLUME_AWARE_PRICING"===f.program:!1,isFirstTier:g}),e=e||f.isLowestAvailablePrice,d++;b++}return c};b.prototype.findStartIndexOfQuantityDiscountTierTable=function(a){for(var b=0,c=this.priceTiers.length-1;b<=c;){var d=parseInt((b+c)/2),e;e=this.priceTiers[d].quantity;e=0===e.length?0:parseInt(e);if(e===a)return d;e>a?c=d-1:b=d+1}return Math.max(0,c)};b.prototype.getStartIndexOfQuantityDiscountTierTable=
function(){var a=this.getCurrentQuantity(),a=this.findStartIndexOfQuantityDiscountTierTable(a);return this.shouldHideFirstTier()&&1<this.priceTiers.length?a+1:a};b.prototype.shouldHideFirstTier=function(){var a=k.singleton.currentQuantity,b=d(this.quantityTextInputSelector);return!this.isAvailabilityMessagePresent()&&1===a&&""===b.val()};b.prototype.generateQuantityDiscountTable=function(){this.cleanOutQuantityDiscountTable();var a=d(this.quantityDiscountTableSelector);this.hasError?a.append(this.generateSingleTierDiscountTableUnorderedList(this.generateQdtErrorMessage())):
this.hasAvailability?this.priceTiers===q?a.append(this.generateFetchInProcessTableUnorderedList()):0===this.priceTiers.length?a.append(this.generateSingleTierDiscountTableUnorderedList()):a.append(this.generateQuantityDiscountTableUnorderedList()):a.append(this.generateQuantityUnavailableTableUnorderedList())};b.prototype.cleanOutQuantityDiscountTable=function(){d(this.quantityDiscountTableSelector).empty()};b.prototype.areUncompetitiveTiersPresent=function(a,b){var c=!1;if("undefined"!==typeof this.priceTiers)for("undefined"===
typeof a&&(a=0),b="undefined"===typeof b?this.priceTiers.length:Math.min(a+b,this.priceTiers.length),a+=1;a<b;a++)if(this.priceTiers[a].isUncompetitive){c=!0;break}return c};b.prototype.isAvailabilityMessagePresent=function(){return"undefined"!==typeof this.priceTiers&&0<this.priceTiers.length&&"undefined"!==typeof this.priceTiers[0].availabilityMessage};b.prototype.showLoadMoreButton=function(a){this.loadMoreButtonForUncompetitiveTiersPresence=this.areUncompetitiveTiersPresent(a);return!this.isLoadMoreButtonClicked&&
(3<this.priceTiers.length-a||this.loadMoreButtonForUncompetitiveTiersPresence)};b.prototype.showBuyingInBulkLink=function(a){return"undefined"!==typeof this.priceTiers[a].buyingInBulkLink};b.prototype.generateQuantityDiscountTableUnorderedList=function(){var a=this.getCurrentQuantity(),b=this.getStartIndexOfQuantityDiscountTierTable(),a=this.generateVisibleTiersList(a,b),c=document.createElement("ul");c.setAttribute("class","qdt-ul");for(var e=d(c),f=0;f<a.length;f++)e.append(this.generateQuantityDiscountTierOption(a[f]));
this.showLoadMoreButton(b)?e.append(this.generateLoadMoreOption()):!this.showBuyingInBulkLink(b)||!0!==this.includeRfqdLinkInNewPicker&&"true"!==this.includeRfqdLinkInNewPicker?!0!==this.includeRfqdLinkInNewPicker&&"true"!==this.includeRfqdLinkInNewPicker||e.append(this.generateRequestForQuantityDiscountOption()):e.append(this.generateBuyingInBulkOption(b));return c};b.prototype.generateSingleTierDiscountTableUnorderedList=function(a){var b=this.getCurrentQuantity(),b=this.generateSingleTierQuantityList(b),
c=document.createElement("ul");c.setAttribute("class","qdt-ul");for(var e=d(c),f=0;f<b.length;f++)e.append(this.generateQuantityDiscountTierOption(b[f]));a&&e.append(a);return c};b.prototype.generateQuantityUnavailableTableUnorderedList=function(){var a=document.createElement("ul");a.setAttribute("class","qdt-ul");d(a).append(this.generateQuantityUnavailableOption());return a};b.prototype.generateSingleTierQuantityList=function(a){var b=[];b.push({quantity:Math.max(a,1),savingsMessage:null,availabilityMessage:null,
quantityPickerPriceText:"",isDiscountUnlocked:!1,isFirstTier:!0});return b};b.prototype.generateFetchInProcessTableUnorderedList=function(){var a=document.createElement("ul");a.setAttribute("class","qdt-ul");d(a).append(this.generateFetchInProcessOption());return a};b.prototype._removeINRSymbol=function(a){a=a.split("\x3e");return a[a.length-1]};b.prototype._populateOptionPriceContent=function(a,b){if("string"===typeof a.quantityPickerPriceText&&-1!==a.quantityPickerPriceText.search("currencyINR")){var c=
document.createElement("span");c.setAttribute("class","currencyINR");c.textContent="  ";b.appendChild(c);a=this._removeINRSymbol(a.quantityPickerPriceText);b.appendChild(document.createTextNode(a))}else b.textContent=a.quantityPickerPriceText};b.prototype.generateQuantityDiscountTierOption=function(a){var b=this,c=document.createElement("li"),e=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div");a.isFirstTier?(d.textContent=a.quantity,c.setAttribute("class",
"qdt-dropdown-item qdt-active")):(d.textContent=a.quantity+"+",c.setAttribute("class","qdt-dropdown-item"));b._populateOptionPriceContent(a,f);d.setAttribute("class","option-tier");f.setAttribute("class","option-price");a.availabilityMessage!=q?this.generateTierWithAvailabilityMessageContent(e,d,f,a.availabilityMessage):a.savingsMessage!=q?this.generateTierWithSavingsMessageContent(e,d,f,a):(e.setAttribute("class","qdt-dropdown-option-no-saving-message"),e.appendChild(d),e.appendChild(f));c.appendChild(e);
c.addEventListener("mousedown",function(){b.handleQuantityDiscountTableOptionClicked(a.quantity)});return c};b.prototype.generateTierWithAvailabilityMessageContent=function(a,b,c,e){var d=document.createElement("div");d.textContent=e;d.setAttribute("class","option-availability-message");this.generateTierWithMessageContent(a,b,c,d)};b.prototype.generateTierWithSavingsMessageContent=function(a,b,c,e){var f=document.createElement("div");f.textContent=e.savingsMessage;e.isDiscountUnlocked?(e=document.createElement("div"),
e.setAttribute("class","option-unlocked-saving-message-icon"),d(f).prepend(e),f.setAttribute("class","option-unlocked-saving-message")):f.setAttribute("class","a-color-tertiary option-saving-message");this.generateTierWithMessageContent(a,b,c,f)};b.prototype.generateTierWithMessageContent=function(a,b,c,e){var d=document.createElement("div");a.setAttribute("class","qdt-dropdown-option-regular");d.setAttribute("class","option-price-and-message");d.appendChild(c);d.appendChild(e);a.appendChild(b);a.appendChild(d)};
b.prototype.generateLoadMoreOption=function(){var a=this,b=document.createElement("li"),c=document.createElement("div");c.textContent=this.loadMoreMessage;b.setAttribute("class","qdt-dropdown-item");c.setAttribute("class","qdt-dropdown-option-load-more");b.setAttribute("id","qdt-dropdown-load-more");b.appendChild(c);b.addEventListener("mousedown",function(b){a.handleLoadMoreOptionClicked(b)});return b};b.prototype.generateRequestForQuantityDiscountOption=function(){var a=this,b=document.createElement("a");
b.textContent=this.requestForQuantityDiscountMessage;b.setAttribute("class","a-link-normal qdt-dropdown-request-for-quantity-discount");b.addEventListener("mousedown",function(b){a.handleRequestForQuantityDiscountOptionClicked(b)});return this.generateLinkOption(b)};b.prototype.generateBuyingInBulkOption=function(a){var b=this;a={container:{element:document.createElement("div"),class:"qdt-dropdown-buying-in-bulk"},link:{element:document.createElement("a"),class:"a-link-normal qdt-dropdown-buying-in-bulk-link",
text:b.priceTiers[a].buyingInBulkLink},message:{element:document.createElement("div"),class:"qdt-dropdown-buying-in-bulk-message",text:b.priceTiers[a].buyingInBulkMessage}};for(var c in a)a[c].element.setAttribute("class",a[c].class),"undefined"!==typeof a[c].text&&(a[c].element.textContent=a[c].text);a.container.element.appendChild(a.link.element);a.container.element.appendChild(a.message.element);a.link.element.addEventListener("mousedown",function(a){b.handleBuyingInBulkOptionClicked(b.bbtLinkSelector,
C,a)});l.registerCounter(B);return this.generateLinkOption(a.container.element)};b.prototype.generateQuantityUnavailableOption=function(){var a=this,b=document.createElement("div"),c=document.createElement("div");c.innerHTML=this.quantityPickerUnavailabilityMessage;b.setAttribute("class","a-link-normal qdt-dropdown-quantity-unavailable");c.setAttribute("class","qdt-dropdown-quantity-unavailable-message");b.appendChild(c);0<this._findWithinPickerAccordionRow(this.splitOfferSectionSelector).length&&
(c=document.createElement("a"),c.textContent=this.quantityPickerUnavailabilityLink,c.setAttribute("class","a-link-normal qdt-dropdown-quantity-unavailable-link"),b.appendChild(c),c.addEventListener("mousedown",function(b){a.handleQuantityUnavailableOptionClicked(b)}));l.registerCounter(D);return this.generateLinkOption(b)};b.prototype.generateLinkOption=function(a){var b=document.createElement("li"),c=document.createElement("div");b.setAttribute("class","qdt-dropdown-item qdt-inactive");c.setAttribute("class",
"qdt-dropdown-option-link");c.appendChild(a);b.appendChild(c);return b};b.prototype.generateFetchInProcessOption=function(){var a=document.createElement("li"),b=document.createElement("div"),c=document.createElement("div"),e=document.createElement("div"),d=document.createElement("img");d.src="https://m.media-amazon.com/images/G/01/AmazonBusiness/vapLoading3._CB1556651073_.gif";c.textContent=this.fetchTheBestPricesMessage;d.setAttribute("class","fetching-in-progress-img");a.setAttribute("class","qdt-dropdown-item qdt-inactive");
b.setAttribute("class","qdt-dropdown-option-fetch-in-progress");e.appendChild(d);b.appendChild(e);b.appendChild(c);a.setAttribute("id","qdt-dropdown-fetch-in-progress");a.appendChild(b);return a};b.prototype.generateQdtErrorMessage=function(){var a=document.createElement("li"),b=document.createElement("div");if(this.isAODLinkEnabled){var c=document.createElement("span");c.setAttribute("class","a-declarative");c.setAttribute("data-action","show-all-offers-display");c.setAttribute("data-show-all-offers-display",
"{}");c.innerHTML=this.qdtErrorMessage;b.appendChild(c)}else b.innerHTML=this.qdtErrorMessage;a.setAttribute("class","qdt-dropdown-item qdt-inactive");b.setAttribute("class","qdt-dropdown-option-request-for-olp");a.setAttribute("id","qdt-dropdown-error-message");a.appendChild(b);var e=b.getElementsByTagName("a")[0];e.addEventListener("mousedown",function(a){e.click()});return a};b.prototype.handleLoadMoreOptionClicked=function(a){this.isLoadMoreButtonClicked=!0;this.buildLoadMoreButtonMetrics();this.generateQuantityDiscountTable();
a.preventDefault()};b.prototype.handleQuantityDiscountTableOptionClicked=function(a){d(this.quantityTextInputSelector).val(a);this.updateQuantityAndHideQuantityDiscountTable();d(this.quantityTextInputLabelSelector).show()};b.prototype.handleRequestForQuantityDiscountOptionClicked=function(b){var c=d(this.requestForQuantityDiscountModalSelector).find(".a-declarative");(c=a.get(c))&&c.show();this.handleBuyingInBulkOptionClicked(this.requestForQuantityDiscountModalSelector,F,b)};b.prototype.handleBuyingInBulkOptionClicked=
function(a,b,c){var e=this.getCurrentQuantity();if(this.amazonDevicesLinkEnabled)l.registerCounter(b),k.singleton.notifyBuyingInBulkOptionClicked(e),f.location.href=this.buyingInBulkBaseUrl;else if(a=document.querySelector(a+" .a-link-normal"))l.registerCounter(b),k.singleton.notifyBuyingInBulkOptionClicked(e),a.click();c.preventDefault()};b.prototype.handleQuantityUnavailableOptionClicked=function(a){l.registerCounter(E);var b=this.getCurrentQuantity();this.quantityUnavailableOptionClicked(b);a.preventDefault()};
b.prototype.quantityUnavailableOptionClicked=function(a){a=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:f.location.protocol+"//"+f.location.host+k.singleton.getLimitedAvailabilityUrl(a);f.location.href=a};b.prototype.updateLimitedAvailabilityMessageVisibility=function(a){this.hasAvailability=a;this.generateQuantityDiscountTable();this.updateBuyboxLimitedAvailabilityMessageVisibility()};b.prototype.updateBuyboxLimitedAvailabilityMessageVisibility=function(){var a=this._findWithinPickerAccordionRow(this.addToCartButtonSelector).closest(".a-button"),
b=c(a),a=this._findWithinPickerAccordionRow(this.splitOfferSectionSelector);if(this.hasAvailability)d(this.limitedAvailabilityMessageSelector).addClass("aok-hidden"),b.enable(),a.addClass("aok-hidden");else{d(this.limitedAvailabilityMessageSelector).removeClass("aok-hidden");b.disable();var b=this.getCurrentQuantity(),e;e=this.amazonDevicesLinkEnabled?this.buyingInBulkBaseUrl:k.singleton.getLimitedAvailabilityUrl(b);this._findWithinPickerAccordionRow(this.splitOfferLinkSelector).attr("href",e);1<
b?(l.registerCounter(n.COUNTER_METRIC.SPLIT_OFFER_LINK_DISPLAYED),a.removeClass("aok-hidden")):a.addClass("aok-hidden")}};b.prototype.buildQptRenderMetrics=function(){var a={};a.counter=t+(this.quantityPricingTableSummaryEnabled?".QPTS":"");l.register(a)};b.prototype.buildQptViewMetrics=function(){var a={};a.counter=u+(this.quantityPricingTableSummaryEnabled?".QPTS":"");l.register(a)};b.prototype.buildQptForLockedMerchantMetrics=function(a){this.qdsForLockedMerchantEnabled&&l.registerCounter(a)};
b.prototype.buildQptUncompetitiveTiersMetrics=function(a,b,c){this.areUncompetitiveTiersPresent(b,c)&&l.registerCounter(a)};b.prototype.buildLoadMoreButtonMetrics=function(){this.loadMoreButtonForUncompetitiveTiersPresence?l.registerCounter(A):l.registerCounter(z)};b.prototype.buildAvailabilityMessageMetrics=function(a){this.isAvailabilityMessagePresent()&&l.registerCounter(a)};b.prototype._findWithinPickerAccordionRow=function(a){return h.findWithinPickerAccordionRow(this.id,a)};return{QuantityPickerLogicV2:b}});
"use strict";n.when("jQuery","A","ready").execute(function(d,m){function g(a){f.ue!==q&&f.ue.count!==q&&f.ue.count(a,(f.ue.count(a)||0)+1)}function a(a,c,d){null===d&&(d="");var f=new RegExp("\\b("+c+"\x3d).*?(\x26|#|$)");if(0<=a.search(f))return a.replace(f,"$1"+d+"$2");a=a.replace(/[?#]$/,"");return a+(0<a.indexOf("?")?"\x26":"?")+c+"\x3d"+d}function c(){return m.state("ABPricingFreeFormQuantityPicker")}function h(a,c){return 0!==a.find('option[value\x3d"'+c.toString()+'"]').length}function k(a){return d("[id^\x3d"+
a+"]").closest("[data-a-accordion-row-name]")}function l(a,c){a=k(a);return 0<a.length?a.find(c):d(c)}function r(){p||c()===q||(p=!0,n.register("abPricingFfqp_utils",function(){return{PACKAGE_PREFIX:"ABPricingFreeFormQuantityPicker",getPageState:c,incrementMetricByOne:g,replaceUrlParam:a,dropdownContainsQuantity:h,findAccordionRow:k,findWithinPickerAccordionRow:l}}))}var p=!1;r();n.register("abPricingFfqp_lazyInitializer",function(){return{tryInitialize:r}})})});
/* ******** */
(function(a){var c=window.AmazonUIPageJS||window.P,e=c._namespace||c.attributeErrors,b=e?e("ABPricingQuantityPricingTableSummaryAssets",""):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,e){a.when("A","jQuery","abPricingFfqp_utils","abPricingFfqp_quantityManager","abPricingFfqp_metrics").execute(function(b,a,c,e,f){b.declarative("b2bhawks-quantity-pricing-table-summary-click","click",function(d){var b=d.data.selectedQuantity,a="",c=d.data.deviceType,g=d.data.bestTier,
h=d.data.recommendedTier;if(!d.data.tierSelected){g&&h?f.registerCounter("AB_QR_QPTS_RECOMMENDED_AND_BEST_TIER"):h?f.registerCounter("AB_QR_QPTS_RECOMMENDED_TIER"):g?f.registerCounter("AB_QR_QPTS_BEST_TIER"):f.registerCounter("AB_QR_QPTS_DEFAULT_TIER");if("mobile"===c||"mobileApp"===c)a+="#b2bhawks-quantity-pricing-table-summary";a={anchorToDiv:a};a.selectedBuyingOption="undefined"!==typeof d.data.selectedBuyingOption&&0<d.data.selectedBuyingOption.length?d.data.selectedBuyingOption:"RZvfv//HxDF+O5021pAnSA\x3d\x3d";
e.singleton.reloadPageForQuantity(b,a)}})})});
/* ******** */
